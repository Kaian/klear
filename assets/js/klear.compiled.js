jQuery.cookie=function(a,d,c){if(1<arguments.length&&(null===d||"object"!==typeof d)){c=jQuery.extend({},c);null===d&&(c.expires=-1);if("number"===typeof c.expires){var e=c.expires,b=c.expires=new Date;b.setDate(b.getDate()+e)}return document.cookie=[encodeURIComponent(a),"=",c.raw?""+d:encodeURIComponent(""+d),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}c=d||{};b=c.raw?function(a){return a}:decodeURIComponent;
return(e=RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)").exec(document.cookie))?b(e[1]):null};(function(a){a.extend({getStylesheet:function(d,c,e){a("link[type='text/css']",a("head:first"));var c=c||"rand"+Math.floor(1E4*Math.random()),b=a("link#"+c,a("head:first"));0<b.length?b.attr("href",d):a("<link />",{href:d,media:e||"screen",type:"text/css",rel:"stylesheet",id:c}).appendTo("head:first")},removeStylesheet:function(d){try{a("link#"+d).remove()}catch(c){}}})})(jQuery);(function(a){a.klear=a.klear||{};a.klear.errors={};a.klear.addErrors=function(d){a.extend(a.klear.errors,d)};a.klear.fetchErrorByCode=function(d){return"undefined"!=typeof a.klear.errors[d]?a.klear.errors[d]:!1}})(jQuery);(function(a){a.widget("klear.moduleDialog",a.ui.dialog,{_superClass:a.ui.dialog.prototype,_getKlearPosition:function(){return this.options.klearPosition?a(this.options.klearPosition):document.body},_makeDraggable:function(){this.uiDialog.draggable({handle:".ui-dialog-titlebar",containment:this._getKlearPosition()})},_create:function(){this.originalTitle=this.element.attr("title");this.options.isHidden=!1;"string"!==typeof this.originalTitle&&(this.originalTitle="");this.options.title=this.options.title||
this.originalTitle;var d=this,c=d.options,e=c.title||"&#160;",b=a.ui.dialog.getTitleId(d.element),f=(d.uiDialog=a("<div></div>")).appendTo(this._getKlearPosition()).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+c.dialogClass).css({zIndex:c.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(b){if(c.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE){d.close(b);b.preventDefault()}}).attr({role:"dialog","aria-labelledby":b}).mousedown(function(b){d.moveToTop(false,
b)});d.element.show().removeAttr("title").css("height","auto ").addClass("ui-dialog-content ui-widget-content").appendTo(f);var h=(d.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(f),j=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){j.addClass("ui-state-hover")},function(){j.removeClass("ui-state-hover")}).focus(function(){j.addClass("ui-state-focus")}).blur(function(){j.removeClass("ui-state-focus")}).click(function(b){d.close(b);
return false}).appendTo(h);(d.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(c.closeText).appendTo(j);a("<span></span>").addClass("ui-dialog-title").attr("id",b).html(e).prependTo(h);a.isFunction(c.beforeclose)&&!a.isFunction(c.beforeClose)&&(c.beforeClose=c.beforeclose);h.find("*").add(h).disableSelection();c.draggable&&a.fn.draggable&&d._makeDraggable();c.resizable&&a.fn.resizable&&d._makeResizable();d._createButtons(c.buttons);d._isOpen=!1;a.fn.bgiframe&&
f.bgiframe()},close:function(d){var c=this,e,b,f=this._getKlearPosition(),h=f.attr("id");a(window).off("scroll."+h);f.css("overflow","auto");if(!1!==c._trigger("beforeClose",d))return c.overlay&&c.overlay.destroy(),c.uiDialog.unbind("keypress.ui-dialog"),c._isOpen=!1,c.options.hide?c.uiDialog.hide(c.options.hide,function(){c._trigger("close",d)}):(c.uiDialog.hide(),c._trigger("close",d)),a.ui.dialog.overlay.resize(),c.options.modal&&(e=0,a(".ui-dialog").each(function(){if(this!==c.uiDialog[0]){b=
a(this).css("z-index");isNaN(b)||(e=Math.max(e,b))}}),a.ui.dialog.maxZ=e),c},open:function(){if(!this._isOpen){var d=this,c=d.options,e=d.uiDialog;d.overlay=c.modal?new a.ui.dialog.overlay(d):null;d.overlay.$el.appendTo(this._getKlearPosition());var b=this._getKlearPosition(),f=b.attr("id");b.css("overflow","hidden");d._size();d._position(c.position);b=this._getNewPosition();e.css("top",b.top+"px").css("left",b.left+"px");a(d.element).css("height","auto");e.show(c.show);d.moveToTop(!0);a(window).on("scroll."+
f,function(){var b=d._getNewPosition();a(d.uiDialog).stop().animate({top:Math.abs(b.top)+"px",left:Math.abs(b.left)+"px"},{duration:350,complete:function(){0>parseFloat(a(this).css("top"))&&a(this).css("top","0px")}})});c.modal&&e.bind("keydown.ui-dialog",function(b){if(b.keyCode===a.ui.keyCode.TAB){var f=a(":tabbable",this),d=f.filter(":first"),f=f.filter(":last");if(b.target===f[0]&&!b.shiftKey)return d.focus(1),!1;if(b.target===d[0]&&b.shiftKey)return f.focus(1),!1}});a(d.element.find(":tabbable").get().concat(e.find(".ui-dialog-buttonpane :tabbable").get().concat(e.get()))).eq(0).focus();
d._isOpen=!0;d._trigger("open");return d}},getContext:function(){return this.element},updateContent:function(d,c){var e=this;e._getKlearPosition().css("overflow","hidden");a(this.element).slideUp("fast",function(){var b=a(this);b.html(d).css("height","auto");var f=a("input, button, select",a(e.uiDialog));f.attr("disabled","disabled");b.slideDown(100,function(){a(window).trigger("scroll."+e._getKlearPosition().attr("id"));f.removeAttr("disabled");"function"==typeof c&&c.apply(e)})})},updateTitle:function(d){a(".ui-dialog-title",
this.uiDialogTitlebar).html(d)},setAsLoading:function(){a(this.element).html('<br /><div class="loadingCircle"></div><div class="loadingCircle1"></div>')},_getNewPosition:function(){var d=a(window).scrollTop()+this._getKlearPosition().offset().top-a(this.uiDialog).height()/2;10>d&&(d=10);var c=this._getKlearPosition().width()/2-a(this.uiDialog).width()/2;return{top:d,left:c}}});a.extend(a.ui.dialog.overlay,{create:function(d){var c="klearModule"==d.widgetName&&a(d.element).moduleDialog("option","klearPosition")?
a(d.element).moduleDialog("option","klearPosition"):document;0===this.instances.length&&(a(c).bind("keydown.dialog-overlay",function(b){a(c).is(":visible")&&(d.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE)&&(d.close(b),b.preventDefault())}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));c==document&&(c=document.body);var e=a("<div />").addClass("ui-widget-overlay").appendTo(c).css({width:this.width(),height:this.height()});this.instances.push(e);
return e}})})(jQuery);(function(a){a.klear=a.klear||{};a.klear.loadedScripts={};a.klear.loadedTemplates={};a.widget("klear.module",{_create:function(){a.klear.module.instances.push(this.element)},_init:function(){a.console.info("[klear.module] _init module");this._initOptions();this.setAsloading();this._initTab()},destroy:function(){a(this.options.menuLink).removeClass("ui-state-highlight");var d=a.inArray(this.element,a.klear.module.instances);-1<d&&a.klear.module.instances.splice(d,1);a.Widget.prototype.destroy.call(this)},
_setOptions:function(){a.Widget.prototype._setOptions.apply(this,arguments)},_setOption:function(d,c){"mainModuleLoaded"===d&&c?this.setMainLoaded():"addToBeLoadedFile"===d?(this.totalToBeLoadedItems+=c,this.updateTotalLoadingItems()):"addLoadedFile"===d?(this.totalLoadedItems++,this.updateCurrentLoadingItem()):a.Widget.prototype._setOption.apply(this,arguments)},enable:function(){},disable:function(){},_trigger:function(){},_getOtherInstances:function(){var d=this.element;return a.grep(a.klear.module.instances,
function(a){return a!==d})},options:{ui:null,container:null,mainEnl:null,title:null,file:null,filesUploading:{},panel:null,tabIndex:null,baseurl:null,menuLink:null,screen:null,dialog:null,dispatchOptions:{},tabLock:!1,parentScreen:!1,moduleDialog:null,PostDispatchMethod:null,PreDispatchMethod:null,shortcuts:{}},_initOptions:function(){a.console.info("[klear.module] _initOptions");this.options.mainEnl=a("a:first",this.element);this.options.title=a("a:first",this.element).html();this.options.file=a("a:first",
this.element).attr("href").replace(/\#tabs\-([^\_]+).*/,"$1");this.options.panel=this.options.ui.panel;this.options.tabIndex=this.options.ui.index;0<a("#target-"+this.options.file).length&&(this.options.menuLink=a("#target-"+this.options.file))},_initTab:function(){a.console.info("[klear.module] _initTab");if(this.options.menuLink&&!(0>=a("span.ui-silk",this.options.menuLink).length)){var d=this.options.mainEnl;a("span.ui-silk",this.element).attr("class",this._getTabIconClass()).on("click",function(){a(d).trigger("click")});
var c=this;a(this.options.ui.tab).off("mouseup.closing");a(this.options.ui.tab).on("mouseup.closing",function(d){button=null==d.which?2>d.button?"LEFT":4==d.button?"MIDDLE":"RIGHT":2>d.which?"LEFT":2==d.which?"MIDDLE":"RIGHT";if("MIDDLE"==button){d.stopPropagation();d.preventDefault();var b=a(this).attr("href");a(this).removeAttr("href");var f=a(this);setTimeout(function(){f.attr("href",b)},100);a(c.element).klearModule("close")}})}},reload:function(){a.console.info("[klear.module] reload");this._initTab()},
dispatch:function(){a.console.info("[klear.module] dispatch");var d={file:this.options.file};a.extend(d,this.options.dispatchOptions);"function"==typeof this.options.PreDispatchMethod&&this.options.PreDispatchMethod.apply(this);a.klear.request(d,this._parseDispatchResponse,this._errorResponse,this)},_errorResponse:function(){a.console.info("[klear.module] _errorResponse");this.setAsloaded();var d='<span class="ui-silk inline dialogTitle '+this._getTabIconClass()+' "></span>',c=[],c=arguments[0]&&
void 0!=arguments[0].message?arguments[0].message:Array.prototype.join.call(arguments,"</em><br /><em>",["klear.module"]),c="<em>"+c+"</em>",c=a.translate("Module registration error.")+"<br /><br />"+a.translate("Error: %s.",c),e=a.translate("Klear Module Error");this.showDialogError(c,{title:e+" - "+d+"",closeTab:this.options.tabIndex})},_parseDispatchResponse:function(d){a.console.info("[klear.module] _parseDispatchResponse");this.setAsloaded();a(this.options.panel).html("");d.mainTemplate&&(d.data.mainTemplate=
d.mainTemplate);var c=this;a(this.element).on("moduleInitReady",function(){a.console.info("[klear.module] "+d.plugin+" is ready.");typeof c.options.PostDispatchMethod=="function"&&c.options.PostDispatchMethod.apply(c)});a(this.element)[d.plugin]({data:d.data})},reDispatch:function(){a.console.info("[klear.module] _reDispatch");this.options.parentScreen&&a(this.options.parentScreen).klearModule("reDispatch");this.setAsloading();this.dispatch()},getPanel:function(){return this.options.panel},getContainer:function(){return this.options.container},
shortcut:function(a){var c=a.which;if(this.options.shortcuts[c])for(var e in this.options.shortcuts[c])"function"==typeof this.options.shortcuts[c][e]&&(a.preventDefault(),a.stopPropagation(),this.options.shortcuts[c][e]())},getShortcuts:function(){return this.options.shortcuts},registerShortcut:function(a,c){this.options.shortcuts[a]||(this.options.shortcuts[a]=[]);this.options.shortcuts[a].push(c)},close:function(d){a.console.info("[klear.module] close");if(this.isLocked())if(a(this.options.container).tabs("select",
this.options.tabIndex),"function"==typeof this.options.tabLock){if(this.options.tabLock())return}else this.showInlineWarn(a.translate("This tab is locked."));var c=!1,e;for(e in this.options.filesUploading){c=!0;break}if(c){var b=this;this.showDialog(a.translate("Upload in progress.")+"<br />"+a.translate("Close the screen?"),{title:a.translate("Attention!"),buttons:[{text:a.translate("Cancel"),click:function(){a(this).moduleDialog("close")}},{text:a.translate("Ignore changes and close"),click:function(){b.unsetAllUploadsInProgress();
b.close()}}]})}else d&&(d.callback&&"function"==typeof d.callback)&&d.callback(),d=!1,this.options.tabIndex==parseInt(a.klear.canvas.tabs("option","selected"))&&(d=a(this.options.parentScreen)),a(this.options.container).tabs("remove",this.options.tabIndex),!1!==d&&a.klear.canvas.tabs("select",d.klearModule("option","tabIndex"))},getModuleDialog:function(){return this.options.moduleDialog},dialogMessageTmpl:'<div class="ui-widget"><div class="ui-state-${state} ui-corner-all inlineMessage"><p><span class="ui-icon ${icon} inlineMessage-icon"></span>{{html text}}</p></div></div>',
showDialog:function(d,c){var e={icon:c.icon||"ui-icon-info",state:c.state||"highlight",text:d,resizable:c.resizable||!1,buttons:c.buttons||null},b=a.tmpl(c.template||this.dialogMessageTmpl,e),f=c.dialogType||"moduleDialog",h=this,j=h._getTabIconClass(),k=!1===c.title?!1:'<span class="ui-icon  inlineMessage-icon dialogTitle '+e.icon+' "></span>'+c.title+""||'<span class="ui-silk inline dialogTitle '+j+' "></span>'+this.options.title+"",g=c.width||300,i=c.height||160,l=0==c.closeTab||c.closeTab?c.closeTab.toString():
!1;"moduleDialog"==f?(this.options.moduleDialog=b,this.options.moduleDialog.moduleDialog({position:{my:"center bottom",at:"center center",collision:"none"},buttons:e.buttons,title:k,modal:!0,width:g,height:i,resizable:e.resizable,klearPosition:this.getPanel(),open:function(){a(h.options.ui.tab).addClass("ui-state-disabled")},close:function(){a(this).moduleDialog("option","isHidden")||(a(h.options.ui.tab).removeClass("ui-state-disabled"),a(this).remove(),l&&h.close())}})):b.dialog({title:'<span class="ui-silk inline dialogTitle '+
j+' "></span>'+this.options.title+"",modal:c.modal||!1,close:function(){a(this).remove();l&&h.close()}})},showDialogMessage:function(d,c){var e={type:"msg",dialogType:"moduleDialog"},c=c||{};a.extend(e,c);this.showDialog(d,e)},showDialogWarn:function(d,c){var e={type:"warn",icon:"ui-icon-alert",dialogType:"moduleDialog"},c=c||{};a.extend(e,c);this.showDialog(d,e)},showDialogError:function(d,c){var e={type:"error",icon:"ui-icon-alert",state:"highlight",dialogType:"moduleDialog"},c=c||{};a.extend(e,
c);this.showDialog(d,e)},isLocked:function(){return!1!==this.options.tabLock},lockTab:function(a){"function"==typeof a?this._setOption("tabLock",a):this._setOption("tabLock",!0)},unLockTab:function(){this._setOption("tabLock",!1)},setAsChanged:function(a){this.element.addClass("changed");this.lockTab(a)},setAsUnChanged:function(){this.element.removeClass("changed");this.unLockTab()},setUploadInProgress:function(a){this.options.filesUploading[a]=!0},unsetUploadInProgress:function(a){this.options.filesUploading[a]&&
delete this.options.filesUploading[a]},unsetAllUploadsInProgress:function(){for(idx in this.options.filesUploading)delete this.options.filesUploading[idx]},_getTabIconClass:function(){return this.options.menuLink&&0<a("span.ui-silk",this.options.menuLink).length?a("span.ui-silk",this.options.menuLink).attr("class"):this.options.menuLink&&0<a("span.ui-silk",this.options.menuLink.parent()).length?a("span.ui-silk",this.options.menuLink.parent()).attr("class"):""},inlineMessageTmpl:'<div class="ui-widget"><div class="ui-state-${state} ui-corner-all inlineMessage"><p><span class="ui-icon ${icon} inlineMessage-icon"></span>{{html text}}</p></div></div>',
showInline:function(d,c){var e=a.tmpl(this.inlineMessageTmpl,{icon:c.icon?c.icon:"ui-icon-info",state:c.state?c.state:"highlight",text:d});e.prependTo(this.options.panel);var b=parseInt(c.timeout);0<c.timeout&&window.setTimeout(function(){e.fadeOut(function(){e.remove();c.fn&&"function"==typeof c.fn&&fn()})},b)},showInlineMessage:function(a,c,e){this.showInline(a,{type:"msg",fn:c||null,timeout:0==e||e?e:5E3})},showInlineWarn:function(a,c,e){this.showInline(a,{type:"warn",fn:c||null,timeout:0==e||
e?e:5E3,icon:"ui-icon-alert"})},showInlineError:function(a,c,e){this.showInline(a,{type:"error",fn:c||null,timeout:0==e||e?e:5E3,state:"error",icon:"ui-icon-alert"})},dialog:function(d){a("<div title='Aviso'>"+d+"</div>").dialog({open:function(){},position:"center",draggable:!1,resizable:!1})},highlightOn:function(){a(this.element).addClass("ui-state-highlight")},highlightOff:function(){a(this.element).removeClass("ui-state-highlight")},_loading:!1,setAsloading:function(){a.console.info("[klear.module] setAsLoading");
this._loading=!0;this.updateLoader()},setAsloaded:function(){a.console.info("[klear.module] setAsloaded");this._loading=!1;this.updateLoader()},loadingTmpl:['<div id="loadingTemplate" class="loadingPanel ui-widget-content ui-corner-all">',"<p>${loadingText}</p>",'<p class="extra main">${loadingTextMain}<span class="ui-icon ui-icon-circle-check inline"></span></p>','<p class="extra">${loadingTextExtra}(<span class="current">0</span>/<span class="total">?</span>)<span class="ui-icon ui-icon-circle-check inline"></span></p>',
"</div>"],totalToBeLoadedItems:0,totalLoadedItems:0,updateTotalLoadingItems:function(){var d=a(this.options.panel);a(".loadingPanel",d).find(".total").html(this.totalToBeLoadedItems)},updateCurrentLoadingItem:function(){var d=a(this.options.panel),c=20<100*this.totalLoadedItems/this.totalToBeLoadedItems?100*this.totalLoadedItems/this.totalToBeLoadedItems/100:".2";a(".loadingPanel",d).find(".current").css("opacity",c).html(this.totalLoadedItems)},setMainLoaded:function(){var d=a(this.options.panel);
a(".loadingPanel",d).find("p.main").addClass("complete")},updateLoader:function(){var d=a(this.options.panel);if(0==a(".loadingPanel",d).length)c=a.tmpl(this.loadingTmpl.join(""),{loadingText:a.translate("Loading content"),loadingTextMain:a.translate("Loading Main Module"),loadingTextExtra:a.translate("Loading Secondary modules")}),c.removeAttr("id").spin({lines:8,length:18,width:4,radius:10,trail:100,speed:1.2}).hide().appendTo(d);else var c=a(".loadingPanel",d);this._loading?(c.show(),this.showOverlay(),
a(this.options.ui.tab).addClass("ui-state-disabled")):a(this.options.ui.tab).removeClass("ui-state-disabled")},_getOverlay:function(){var d=a(this.options.panel);return 0==a("div.overlay",d).length?a("<div />").addClass("overlay").css({opacity:"0.6",width:d.width()+"px",height:d.height()+"px"}).hide().appendTo(d):a("div.overlay",d)},showOverlay:function(){this._getOverlay().show()},hideOverlay:function(){this._getOverlay().hide()},updateTitle:function(d){d&&""!=d&&a(this.options.ui.tab).html(d)},
getTitle:function(){return a(this.options.ui.tab).html()}});a.extend(a.klear.module,{instances:[]});a.widget.bridge("klearModule",a.klear.module)})(jQuery);(function(a){a.klear=a.klear||{};a.klear.cacheEnabled=!0;a.klear.removeCache=function(){a.klear.loadedScripts={};a.klear.loadedTemplates={}};a.klear.errorCodes={auth:["1002"]};var d={},c={};a.klear.buildRequest=function(c){var b={controller:"index",action:"dispatch",file:"index",post:!1};a.extend(b,c);var f={};a.each("execute type file screen dialog command pk language str namespace theme".split(" "),function(a,c){b[c]&&(f[c]=b[c])});var c=b.post?"post":"get",d=void 0!=b.async?b.async:!0,j=a.klear.baseurl+
b.controller+"/"+b.action;"post"==c?(j+="?"+a.param(f),_data=b.post):_data=f;return{action:j,data:_data,type:c,async:d}};a.klear.requestTranslations=[];a.klear.requestSearchTranslations=function(){a('script[src*="js/translation"]',a("head")).each(function(){a.klear.requestTranslations.push(a(this).attr("src"))})};a.klear.requestReloadTranslations=function(){for(var c=a.klear.requestTranslations.length,b={},f=[],d=0;d<c;d++)if(void 0==b[a.klear.requestTranslations[d]]){b[a.klear.requestTranslations[d]]=
!0;var j=a('script[src="'+a.klear.requestTranslations[d]+'"]');0<j.length&&j.remove();a.ajax({url:a.klear.requestTranslations[d]+"?"+(new Date).getTime()+"&language="+a.klear.language,dataType:"script",type:"get",cache:!0,async:!0,success:function(){},error:function(){}});f.push(a.klear.requestTranslations[d])}a.klear.requestTranslations=f};a.klear.request=function(e,b,f,h){var j=arguments,k=function(){j.callee.apply(j.callee,Array.prototype.slice.call(j))},g="",i="",l=h&&h.element?function(b,f){a(h.element).klearModule("option",
b,f||!0)}:function(){},m=function(c){for(var d="baseurl templates scripts css data plugin".split(" "),e=0;e<d.length;e++)if("undefined"==typeof c[d[e]]){f.apply(h,[a.translate("Module registration error.")]);return}g=c.baseurl;i=c.cleanBaseurl;d=function(a,b){var f=0;for(b in a)f++;return f};a.when(p(c.templates,d(c.templates,"template")),r(c.css,d(c.css,"css")),n(c.scripts,d(c.scripts,"scripts"))).done(function(){var d=0;(function v(){!1===c.plugin||"function"==typeof a.fn[c.plugin]?b.apply(h,[c]):
40==++d?f.apply(h,[c.plugin+" plugin not found"]):window.setTimeout(v,50)})()}).fail(function(b){f.apply(h,[a.translate("Module registration error."),b])})},p=function(b,f){var d=a.Deferred();l("addToBeLoadedFile",f);if(0==f)d.resolve();else{var e=0,h=function(){l("addLoadedFile");f--;e++;0==f&&d.resolve(e)},j="";a.each(b,function(b,f){a.klear.cacheEnabled&&a.klear.loadedTemplates[b]?h():c[b]?c[b].push(h):(j="object"==typeof f&&"undefined"!=typeof f.module?i+"/"+f.module+f.tmpl:g+f,c[b]||(c[b]=[]),
a.ajax({url:j,dataType:"text",type:"get",cache:!0,success:function(f){a.template(b,f);a.klear.loadedTemplates[b]=!0;h();for(var d in c[b])c[b][d]();c[b]=!1},error:function(){d.reject(a.translate("Error downloading template [%s].",b))}}))});return d.promise()}},q=function(b){b.match(/js\/translation/)&&a.klear.requestTranslations.push(b)},n=function(b,f){var c=a.Deferred();l("addToBeLoadedFile",f);if(0==f)c.resolve();else{var e=0,h=!1;a.each(b,function(b,j){if(a.klear.cacheEnabled&&a.klear.loadedScripts[b])l("addLoadedFile"),
f--;else if(""==j)l("addLoadedFile"),f--;else if(!0==d[b])l("addLoadedFile"),f--;else{h=!0;var o="";"object"==typeof j&&"undefined"!=typeof j.module?o=i+"/"+j.module+j.tmpl:(o=g+j,q(o));d[b]=!0;try{a.ajax({url:o,dataType:"script",type:"get",cache:!0,async:!0,success:function(){a.klear.loadedScripts[b]=true;l("addLoadedFile");f--;e++;f==0&&c.resolve(e)},error:function(){d[b]=false;c.reject("Error downloading script ["+j+"]")}})}catch(s){console.log(s)}}});return h?c.promise():c.resolve(0)}},r=function(b,
f){var c=a.Deferred();l("addToBeLoadedFile",f);if(0==f)c.resolve();else{for(var d in b)a.getStylesheet(g+b[d],d),a("#"+d).on("load",function(){l("addLoadedFile");f--;0==f&&c.resolve(!0)});c.promise(!0)}},o=a.klear.buildRequest(e);if(e.external){var s="ftarget"+Math.round(Math.random(1E3,1E3)),t=a("<iframe />",{name:s}).hide(),u=a("<form />").attr({action:o.action,method:o.type,target:s});a.each(a.param(o.data).split("&"),function(b,f){var c=f.split("=");a("<input>").attr("name",decodeURIComponent(c[0])).attr("type",
"hidden").val(c[1]).appendTo(u)});t.appendTo("body");u.appendTo("body").on("submit",function(){var b=a(this);setTimeout(function(){b.remove();t.remove()},1E5)}).trigger("submit");"function"==typeof b&&b(!0);return!1}a.ajax({url:o.action,dataType:"json",context:this,data:o.data,async:o.async,type:o.type,success:function(c){if(null!=c)if(c.mustLogIn&&"login"!=e.controller)e.isLogin||a.klear.hello("rememberCallback",k),a.klear.login();else switch(a.klear.login("close"),l("mainModuleLoaded"),c.responseType){case "dispatch":return m(c);
case "simple":c.data?b.apply(h,[c.data]):f.apply(h,[a.translate("Unknown response format in Simple Response")]);break;case "redirect":window.location=c.data;break;default:f.apply(h,["Unknown response type"])}},error:function(b){try{var c=a.parseJSON(b.responseText)}catch(d){c={message:a.translate("Undefined Error"),raw:b.responseText}}c.mustLogIn&&"login"!=e.controller||-1!=a.inArray(c.code,a.klear.errorCodes.auth)?(e.isLogin||a.klear.hello("setCallback",k),a.klear.login()):f.apply(h,[c])}})}})(jQuery);(function(a){a.xui||(a.xui={});var d=a.extend({},a.ui.tabs.prototype),c=d._create,e=d._update;a.xui.tabs=a.extend(d,{options:a.extend({},d.options,{scrollable:!1,closable:!1,animationSpeed:500}),_create:function(){var b=this.options;c.apply(this);if(b.scrollable){var f=this.element;f.parent().is(".ui-scrollable-tabs")&&f.parent(".ui-scrollable-tabs").replaceWith(f);f.parent().width();var d=f.wrap("<div></div>").parent().addClass("ui-scrollable-tabs ui-widget-content ui-corner-all"),e=this.element.find(".ui-tabs-nav:first").removeClass("ui-corner-all"),
k=a('<ol class="ui-helper-reset ui-helper-clearfix ui-tabs-nav-arrows" id="tabsListNavArrows"></ol>').prependTo(d),g=a('<li class="ui-tabs-arrow-previous ui-state-default ui-widget-content" title="Previous"><a href="#"><span class="ui-icon ui-icon-carat-1-w">Previous tab</span></a></li>').prependTo(k),i=a('<li class="ui-tabs-arrow-next ui-state-default ui-widget-content" title="Next"><a href="#"><span class="ui-icon ui-icon-carat-1-e">Next tab</span></a></li>').appendTo(k);a.fn.reverse=[].reverse;
var l=function(b){var a={};a.right=b.next("li").length!=0?b.next("li")[0].offsetLeft+15:b[0].offsetLeft+b.outerWidth(true);a.right=a.right+e[0].offsetLeft>k.width();a.left=b[0].offsetLeft+e[0].offsetLeft<0+(g.is(":visible")?g.outerWidth():0);return a},m=function(a,f){if(a!="none")if(a=="left"){g.show("fade");f.next("li").length==0&&i.hide("fade");var c=0,c=f.next("li").length!=0?f.next("li")[0].offsetLeft:f[0].offsetLeft+f.outerWidth(true),c=k.width()-c,c=c-(f.next("li").length==0?1:i.outerWidth());
e.animate({"margin-left":c+"px"},b.animationSpeed)}else{i.show("fade");f.prev("li").length==0&&g.hide("fade");c=0;c=f.prev("li").length==0?2:g.outerWidth()+2;c=(f[0].offsetLeft-c)*-1;e.animate({"margin-left":c},b.animationSpeed)}},p=function(b){return b?b?b[0].offsetLeft+b.outerWidth(true):e.find("li:last")[0].offsetLeft+e.find("li:last").outerWidth(true):0},q=function(){if(p()>k.width())i.show("fade");else{i.hide("fade");g.hide("fade");e.css("margin-left",0)}},n=function(c){b.closable&&(c||e.addClass("ui-tabs-closable").find("li")).each(function(){var b=
a(this).addClass("stHasCloseBtn");a(this).append(a("<span/>").addClass("ui-state-default ui-corner-all ui-tabs-close").hover(function(){a(this).toggleClass("ui-state-hover")}).append(a("<span/>").addClass("ui-icon ui-icon-circle-close").html("Close").attr("title","Close this tab").click(function(){f.tabs("remove",b.prevAll("li").length)})))})};a.fn.refreshTabs=function(){var b=e.find("li.ui-tabs-selected");f.trigger("tabsselect",[{tab:b.find("a")}]);if(p()>k.width()){b.next("li").length!=0&&i.show("fade");
b=e.find("li:last");b=b[0].offsetLeft+b.outerWidth(true);b=k.width()-e[0].offsetLeft-b;if(b>1){e.css("margin-left",e[0].offsetLeft+b-1);i.hide("fade")}}else{i.hide("fade");g.hide("fade");e.css("margin-left",0)}};(function(){n();q();i.on("click",function(b){b.preventDefault();b.stopPropagation();b=e.find("li.ui-tabs-selected").next("li");b.length&&b.find("a").trigger("click")});g.on("click",function(b){b.preventDefault();b.stopPropagation();b=e.find("li.ui-tabs-selected").prev("li");b.length&&b.find("a").trigger("click")});
f.bind("tabsselect",function(b,f){var c=a(f.tab).parent();c.next("li").length==0&&i.hide("fade");var d=l(c);m(d.right?"left":d.left?"right":"none",c)}).bind("tabsadd",function(b,f){a(f.tab).parent();i.show("fade")}).bind("tabsremove",function(){if(b.closable){if(f.tabs("length")==1){f.find("li .ui-tabs-close").hide();e.removeClass("ui-tabs-closable");f.trigger("tabsselect")}if(p()<k.width()){i.hide("fade");g.hide("fade")}else{l(e.find("li:last")).right||m("left",e.find("li:last"));q()}}})})()}return this},
_update:function(){e.apply(this)}});a.widget("xui.tabs",a.xui.tabs)})(jQuery);(function(a){a.extend({translate:function(d){var c=arguments,e=arguments.length;if(0>=e)return"0";var b=null;1<e&&"object"==typeof arguments[e-1]&&(b=arguments[e-1][0]);var f=d.replace(/'/g,"").replace(/"/g,"");void 0==a.translations[f]?void 0!=a.translationRegister&&a.translationRegister(d,b):d=a.translations[f];e=null==b?e:e-1;for(b=1;b<e;b++)void 0!=c[b]&&(d=d.replace(/%s/,c[b]));return d},addTranslation:function(d){a.extend(a.translations,d)},translations:{}})})(jQuery);(function(a){a(window.jQuery,window,document)})(function(a,d,c){a.widget("selectBox.selectBoxIt",{VERSION:"3.3.0",options:{showEffect:"none",showEffectOptions:{},showEffectSpeed:"medium",hideEffect:"none",hideEffectOptions:{},hideEffectSpeed:"medium",showFirstOption:!0,defaultText:"",defaultIcon:"",downArrowIcon:"",theme:"default",keydownOpen:!0,isMobile:function(){return/iPhone|iPod|iPad|Android|BlackBerry|Opera Mini|IEMobile/.test(navigator.userAgent||navigator.vendor||d.opera)},"native":!1,aggressiveChange:!1,
selectWhenHidden:!0,viewport:a(d),similarSearch:!1,copyAttributes:["title","rel"],copyClasses:"button",nativeMousedown:!1,customShowHideEvent:!1,autoWidth:!0,html:!0},getThemes:function(){var b=a(this.element).attr("data-theme")||"c";return{bootstrap:{focus:"active",hover:"",disabled:"disabled",arrow:"caret",button:"btn",list:"dropdown-menu",container:"bootstrap",open:"open"},jqueryui:{focus:"ui-state-focus",hover:"ui-state-hover",disabled:"ui-state-disabled",arrow:"ui-icon ui-icon-triangle-1-s",
button:"ui-widget ui-state-default",list:"ui-widget ui-widget-content",container:"jqueryui",open:"selectboxit-open"},jquerymobile:{focus:"ui-btn-down-"+b,hover:"ui-btn-hover-"+b,disabled:"ui-disabled",arrow:"ui-icon ui-icon-arrow-d ui-icon-shadow",button:"ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-up-"+b,list:"ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-up-"+b,container:"jquerymobile",open:"selectboxit-open"},"default":{focus:"selectboxit-focus",hover:"selectboxit-hover",
disabled:"selectboxit-disabled",arrow:"selectboxit-default-arrow",button:"selectboxit-btn",list:"selectboxit-list",container:"selectboxit-container",open:"selectboxit-open"}}},_create:function(){if(this.element.is("select"))return this.element.hide(),this.originalElem=this.element[0],this.selectBox=this.element,this.selectItems=this.element.find("option"),this.firstSelectItem=this.selectItems.slice(0,1),this.documentHeight=a(c).height(),this.theme=this.getThemes()[this.options.theme]||this.getThemes()["default"],
this.currentFocus=0,this.blur=!0,this.textArray=[],this.currentIndex=0,this.currentText="",this.flipped=!1,this._createDropdownButton()._createUnorderedList()._copyAttributes()._replaceSelectBox()._addClasses(this.theme)._eventHandlers(),this.originalElem.disabled&&this.disable&&this.disable(),this._ariaAccessibility&&this._ariaAccessibility(),this._mobile&&this._mobile(),this.options["native"]&&this._applyNativeSelect(),this.triggerEvent("create"),this},_createDropdownButton:function(){var b=this.originalElem.id||
"",f=this.options.copyClasses,c=this.selectBox.attr("class")||"";this.dropdownText=a("<span/>",{id:b&&b+"SelectBoxItText","class":"selectboxit-text",unselectable:"on",text:this.firstSelectItem.text()}).attr("data-val",this.originalElem.value);this.dropdownImageContainer=a("<span/>",{"class":"selectboxit-option-icon-container"});this.dropdownImage=a("<i/>",{id:b&&b+"SelectBoxItDefaultIcon","class":"selectboxit-default-icon",unselectable:"on"});this.dropdown=a("<span/>",{id:b&&b+"SelectBoxIt","class":"selectboxit "+
("button"===f?c:""),name:this.originalElem.name,tabindex:this.selectBox.attr("tabindex")||"0",unselectable:"on"}).append(this.dropdownImageContainer.append(this.dropdownImage)).append(this.dropdownText);this.dropdownContainer=a("<span/>",{id:b&&b+"SelectBoxItContainer","class":"selectboxit-container "+("container"===f?c:"")}).append(this.dropdown);return this},_createUnorderedList:function(){var b=this,f,c,d,e,g,i,l,m="",p=b.originalElem.id||"",p=a("<ul/>",{id:p&&p+"SelectBoxItOptions","class":"selectboxit-options",
tabindex:-1}),q,n;b.options.showFirstOption||(b.selectItems=b.selectBox.find("option").slice(1));b.selectItems.each(function(o){d=c="";f=a(this).prop("disabled");e=a(this).data("icon")||"";i=(g=a(this).data("iconurl")||"")?"selectboxit-option-icon-url":"";l=g?"style=\"background-image:url('"+g+"');\"":"";n=(q=a(this).attr("data-text"))?q:a(this).text();if(a(this).parent().is("optgroup")){c="selectboxit-optgroup-option";a(this).index()===0&&(d='<span class="selectboxit-optgroup-header" data-disabled="true">'+
a(this).parent().first().attr("label")+"</span>")}m=m+(d+'<li id="'+o+'" data-val="'+this.value+'" data-disabled="'+f+'" class="'+c+" selectboxit-option "+(a(this).attr("class")||"")+'"><a class="selectboxit-option-anchor"><span class="selectboxit-option-icon-container"><i class="selectboxit-option-icon '+e+" "+(i||b.theme.container)+'"'+l+"></i></span>"+(b.options.html?n:b.htmlEscape(n))+"</a></li>");b.textArray[o]=f?"":n;if(this.selected){b._setText(b.dropdownText,n);b.currentFocus=o}});if((b.options.defaultText||
b.selectBox.data("text"))&&!b.selectBox.find("option[selected]").length){var r=b.options.defaultText||b.selectBox.data("text");b._setText(b.dropdownText,r);b.options.defaultText=r}p.append(m);b.list=p;b.dropdownContainer.append(b.list);b.listItems=b.list.find("li");b.listItems.first().addClass("selectboxit-option-first");b.listItems.last().addClass("selectboxit-option-last");b.list.find("li[data-disabled='true']").not(".optgroupHeader").addClass(b.theme.disabled);b.dropdownImage.addClass(b.selectBox.data("icon")||
b.options.defaultIcon||b.listItems.eq(b.currentFocus).find("i").attr("class"));b.dropdownImage.attr("style",b.listItems.eq(b.currentFocus).find("i").attr("style"));return b},_replaceSelectBox:function(){var b=this.originalElem.id||"";this.selectBox.css("display","none").after(this.dropdownContainer);this.dropdown.height();this.downArrow=a("<i/>",{id:b&&b+"SelectBoxItArrow","class":"selectboxit-arrow",unselectable:"on"});this.downArrowContainer=a("<span/>",{id:b&&b+"SelectBoxItArrowContainer","class":"selectboxit-arrow-container",
unselectable:"on"}).append(this.downArrow);this.dropdown.append(this.downArrowContainer);this.listItems.removeClass("selectboxit-selected").eq(this.currentFocus).addClass("selectboxit-selected");this.dropdownImageContainer.width()||this.dropdownImageContainer.remove();this.options.autoWidth&&this.dropdown.css({width:"auto"}).css({width:this.list.outerWidth(!0)+this.downArrowContainer.outerWidth(!0)+this.dropdownImage.outerWidth(!0)});this.dropdownText.css({"max-width":this.dropdownContainer.width()-
(this.downArrowContainer.outerWidth(!0)+this.dropdownImage.outerWidth(!0))});return this},_scrollToView:function(b){var a=this.listItems.eq(this.currentFocus),c=this.list.scrollTop(),d=a.height(),a=a.position().top,e=Math.abs(a),g=this.list.height();"search"===b?g-a<d?this.list.scrollTop(c+(a-(g-d))):-1>a&&this.list.scrollTop(a-d):"up"===b?-1>a&&this.list.scrollTop(c-e):"down"===b&&g-a<d&&this.list.scrollTop(c+(e-g+d));return this},_callbackSupport:function(b){a.isFunction(b)&&b.call(this,this.dropdown);
return this},_setText:function(b,a){this.options.html?b.html(a):b.text(a);return this},open:function(b){var a=this,c=a.options.showEffect,d=a.options.showEffectSpeed,e=a.options.showEffectOptions,g=a.options["native"],i=a.options.isMobile();if(!a.listItems.length)return a;!g&&!i&&!this.list.is(":visible")&&(a.triggerEvent("open"),a._dynamicPositioning&&a._dynamicPositioning(),"none"===c?a.list.show():"show"===c?a.list.show(d):"slideDown"===c?a.list.slideDown(d):"fadeIn"===c?a.list.fadeIn(d):a.list.show(c,
e,d),a.list.promise().done(function(){a._scrollToView("search")}));a._callbackSupport(b);return a},close:function(b){var a=this.options.hideEffect,c=this.options.hideEffectSpeed,d=this.options.hideEffectOptions,e=this.options["native"],g=this.options.isMobile();!e&&!g&&this.list.is(":visible")&&(this.triggerEvent("close"),"none"===a?this.list.hide():"hide"===a?this.list.hide(c):"slideUp"===a?this.list.slideUp(c):"fadeOut"===a?this.list.fadeOut(c):this.list.hide(a,d,c));this._callbackSupport(b);return this},
toggle:function(){var b=this.list.is(":visible");b?this.close():b||this.open()},_keyMappings:{38:"up",40:"down",13:"enter",8:"backspace",9:"tab",32:"space",27:"esc"},_keydownMethods:function(){var b=this,a=b.list.is(":visible")||!b.options.keydownOpen;return{down:function(){b.moveDown&&a&&b.moveDown()},up:function(){b.moveUp&&a&&b.moveUp()},enter:function(){var a=b.list.find("li."+b.focusClass);a.length||(a=b.listItems.first());b._update(a);b.list.is(":visible")&&b.close();b.triggerEvent("enter")},
tab:function(){b.triggerEvent("tab-blur");b.close()},backspace:function(){b.triggerEvent("backspace")},esc:function(){b.close()}}},_eventHandlers:function(){var b=this,c=b.options.nativeMousedown,d=b.options.customShowHideEvent,e,k;this.dropdown.bind({"click.selectBoxIt":function(){b.dropdown.trigger("focus",!0);b.originalElem.disabled||(b.triggerEvent("click"),!c&&!d&&b.toggle())},"mousedown.selectBoxIt":function(){a(this).data("mdown",!0);b.triggerEvent("mousedown");c&&!d&&b.toggle()},"mouseup.selectBoxIt":function(){b.triggerEvent("mouseup")},
"blur.selectBoxIt":function(){b.blur&&(b.triggerEvent("blur"),b.list.is(":visible")&&b.close())},"focus.selectBoxIt":function(c,d){var f=a(this).data("mdown");a(this).removeData("mdown");!f&&!d&&setTimeout(function(){b.triggerEvent("tab-focus")},0);d||b.triggerEvent("focus")},"keydown.selectBoxIt":function(a){var c=b._keyMappings[a.keyCode],d=b._keydownMethods()[c];d&&(d(),b.options.keydownOpen&&("up"===c||"down"===c)&&b.open());d&&"tab"!==c&&a.preventDefault()},"keypress.selectBoxIt":function(a){var c=
a.charCode||a.keyCode,d=String.fromCharCode(c);b.search&&b.search(d,!0,!0);32===c&&a.preventDefault()},"mouseenter.selectBoxIt":function(){b.triggerEvent("mouseenter")},"mouseleave.selectBoxIt":function(){b.triggerEvent("mouseleave")}});b.list.bind({"mouseover.selectBoxIt":function(){b.blur=!1},"mouseout.selectBoxIt":function(){b.blur=!0},"focusin.selectBoxIt":function(){b.dropdown.trigger("focus",!0)}}).delegate("li","click.selectBoxIt",function(){b._update(a(this));b.triggerEvent("option-click");
"false"===a(this).attr("data-disabled")&&b.close()}).delegate("li","focusin.selectBoxIt",function(){b.listItems.not(a(this)).removeAttr("data-active");a(this).attr("data-active","");var c=b.list.is(":hidden");(b.options.searchWhenHidden&&c||b.options.aggressiveChange||c&&b.options.selectWhenHidden)&&b._update(a(this))}).delegate("li","mouseup.selectBoxIt",function(){c&&!d&&(b._update(a(this)),b.triggerEvent("option-mouseup"),"false"===a(this).attr("data-disabled")&&b.close())});b.selectBox.bind({"change.selectBoxIt, internal-change.selectBoxIt":function(a,
c){var d;c||(d=b.list.find('li[data-val="'+b.originalElem.value+'"]'),d.length&&(b.listItems.eq(b.currentFocus).removeClass(b.focusClass),b.currentFocus=+d.attr("id")));d=b.listItems.eq(b.currentFocus);k=(e=d.attr("data-text"))?e:d.find("a").text();b._setText(b.dropdownText,k);b.dropdownText.attr("data-val",b.originalElem.value);d.find("i").attr("class")&&(b.dropdownImage.attr("class",d.find("i").attr("class")).addClass("selectboxit-default-icon"),b.dropdownImage.attr("style",d.find("i").attr("style")));
b.triggerEvent("changed")},"disable.selectBoxIt":function(){b.dropdown.addClass(b.theme.disabled)},"enable.selectBoxIt":function(){b.dropdown.removeClass(b.theme.disabled)}});return b},_update:function(a){var c,d=this.options.defaultText||this.selectBox.attr("data-text");"false"===a.attr("data-disabled")&&(c=(c=this.listItems.eq(this.currentFocus).attr("data-text"))?c:this.listItems.eq(this.currentFocus).text(),(d&&this.options.html?this.dropdownText.html()===d:this.dropdownText.text()===d)&&this.selectBox.val()===
a.attr("data-val")?(this._setText(this.dropdownText,c),this.dropdownText.trigger("internal-change")):(this.selectBox.val(a.attr("data-val")),this.currentFocus=+a.attr("id"),this.originalElem.value!==this.dropdownText.attr("data-val")&&this.triggerEvent("change")))},_addClasses:function(b){var c=this,d=b.focus,e=b.hover,k=b.button,g=b.list,i=b.arrow,l=b.container,m=b.open;c.focusClass=d;c.openClass=m;c.selectedClass="selectboxit-selected";c.downArrow.addClass(c.selectBox.data("downarrow")||c.options.downArrowIcon||
i);c.dropdownContainer.addClass(l);c.dropdown.addClass(k);c.list.addClass(g);c.listItems.bind({"focusin.selectBoxIt":function(){a(this).addClass(d)},"blur.selectBoxIt":function(){a(this).removeClass(d)}});c.selectBox.bind({"open.selectBoxIt":function(){var a=c.list.find("li[data-val='"+c.dropdownText.attr("data-val")+"']");a.length||(a=0===c.currentFocus&&!c.options.showFirstOption&&c.listItems.eq(0).hasClass(c.theme.disabled)?c.listItems.not("[data-disabled=true]").first():c.listItems.first());c.currentFocus=
+a.attr("id");a=c.listItems.eq(c.currentFocus);c.dropdown.addClass(m);c.dropdown.removeClass(e).addClass(d);c.listItems.removeClass(c.selectedClass);c.listItems.removeAttr("data-active").not(a).removeClass(d);a.addClass(d).addClass(c.selectedClass)},"close.selectBoxIt":function(){c.dropdown.removeClass(m)},"blur.selectBoxIt":function(){c.dropdown.removeClass(d)},"mouseenter.selectBoxIt":function(){c.dropdown.addClass(e)},"mouseleave.selectBoxIt":function(){c.dropdown.removeClass(e)}});c.listItems.bind({"mouseenter.selectBoxIt":function(){"false"===
a(this).attr("data-disabled")&&(c.listItems.removeAttr("data-active"),a(this).addClass(d).attr("data-active",""),c.listItems.not(a(this)).removeClass(d),a(this).addClass(d),c.currentFocus=+a(this).attr("id"))},"mouseleave.selectBoxIt":function(){"false"===a(this).attr("data-disabled")&&(c.listItems.not(a(this)).removeClass(d).removeAttr("data-active"),a(this).addClass(d),c.currentFocus=+a(this).attr("id"))}});return c},refresh:function(a){this._destroySelectBoxIt&&(this._destroySelectBoxIt()._create(!0)._callbackSupport(a),
this.triggerEvent("refresh"));return this},htmlEscape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},triggerEvent:function(a){this.selectBox.trigger(a,{elem:this.selectBox.eq(this.options.showFirstOption?this.currentFocus:0<=this.currentFocus-1?this.currentFocus:0),"dropdown-elem":this.listItems.eq(this.currentFocus)});return this},_copyAttributes:function(){this._addSelectBoxAttributes&&this._addSelectBoxAttributes();
return this}});var e=a.selectBox.selectBoxIt.prototype;e._ariaAccessibility=function(){var b=this;b.dropdown.attr({role:"combobox","aria-autocomplete":"list","aria-expanded":"false","aria-owns":b.list.attr("id"),"aria-activedescendant":b.listItems.eq(b.currentFocus).attr("id"),"aria-label":a("label[for='"+b.originalElem.id+"']").text()||"","aria-live":"assertive"}).bind({"disable.selectBoxIt":function(){b.dropdown.attr("aria-disabled","true")},"enable.selectBoxIt":function(){b.dropdown.attr("aria-disabled",
"false")}});b.list.attr({role:"listbox","aria-hidden":"true"});b.listItems.attr({role:"option"});b.selectBox.bind({"change.selectBoxIt":function(){b.dropdownText.attr("aria-label",b.originalElem.value)},"open.selectBoxIt":function(){b.list.attr("aria-hidden","false");b.dropdown.attr("aria-expanded","true")},"close.selectBoxIt":function(){b.list.attr("aria-hidden","true");b.dropdown.attr("aria-expanded","false")}});return b};e._addSelectBoxAttributes=function(){var b=this;b._addAttributes(b.selectBox.prop("attributes"),
b.dropdown);b.selectItems.each(function(c){b._addAttributes(a(this).prop("attributes"),b.listItems.eq(c))});return b};a.selectBox.selectBoxIt.prototype._addAttributes=function(b,c){var d=this.options.copyAttributes;b.length&&a.each(b,function(b,e){var g=e.name.toLowerCase(),i=e.value;"null"!==i&&(-1!==a.inArray(g,d)||-1!==g.indexOf("data"))&&c.attr(g,i)});return this};e.destroy=function(b){this._destroySelectBoxIt();a.Widget.prototype.destroy.call(this);this._callbackSupport(b);return this};e._destroySelectBoxIt=
function(){this.dropdown.unbind(".selectBoxIt").undelegate(".selectBoxIt");a.contains(this.dropdownContainer[0],this.originalElem)&&this.dropdownContainer.before(this.selectBox);this.dropdownContainer.remove();this.selectBox.removeAttr("style").show();this.triggerEvent("destroy");return this};e.disable=function(b){this.options.disabled||(this.close(),this.selectBox.attr("disabled","disabled"),this.dropdown.removeAttr("tabindex").addClass("selectboxit-disabled"),a.Widget.prototype.disable.call(this),
this.triggerEvent("disable"));this._callbackSupport(b);return this};e.disableOption=function(a,c){var d,e;"number"===(typeof a).toLowerCase()&&(this.close(),d=this.selectBox.find("option").eq(a),this.triggerEvent("disable-option"),d.attr("disabled","disabled"),this.listItems.eq(a).attr("data-disabled","true").addClass(this.theme.disabled),this.currentFocus===a&&(d=this.listItems.eq(this.currentFocus).nextAll("li").not("[data-disabled='true']").first().length,e=this.listItems.eq(this.currentFocus).prevAll("li").not("[data-disabled='true']").first().length,
d?this.moveDown():e?this.moveUp():this.disable()));this._callbackSupport(c);return this};e._isDisabled=function(){this.originalElem.disabled&&this.disable();return this};e._dynamicPositioning=function(){var b=this.dropdown.offset().top,c=this.list.data("max-height")||this.list.outerHeight(),d=this.dropdown.outerHeight(),e=this.options.viewport,k=e.height(),e=a.isWindow(e.get(0))?e.scrollTop():e.offset().top,g=!(b+d+c<=k+e);this.list.data("max-height")||this.list.data("max-height",this.list.outerHeight());
g?this.dropdown.offset().top-e>=c?(this.list.css("max-height",c),this.list.css("top",this.dropdown.position().top-this.list.outerHeight())):(b=Math.abs(b+d+c-(k+e)),k=Math.abs(this.dropdown.offset().top-e-c),b<k?(this.list.css("max-height",c-b-d/2),this.list.css("top","auto")):(this.list.css("max-height",c-k-d/2),this.list.css("top",this.dropdown.position().top-this.list.outerHeight()))):(this.list.css("max-height",c),this.list.css("top","auto"));return this};e.enable=function(b){this.options.disabled&&
(this.triggerEvent("enable"),this.selectBox.removeAttr("disabled"),this.dropdown.attr("tabindex",0).removeClass(this.disabledClasses),a.Widget.prototype.enable.call(this),this._callbackSupport(b));return this};e.enableOption=function(a,c){var d;"number"===(typeof a).toLowerCase()&&(d=this.selectBox.find("option").eq(a),this.triggerEvent("enable-option"),d.removeAttr("disabled"),this.listItems.eq(a).attr("data-disabled","false").removeClass(this.disabledClasses));this._callbackSupport(c);return this};
e.moveDown=function(a){this.currentFocus+=1;var c="true"===this.listItems.eq(this.currentFocus).attr("data-disabled")?!0:!1,d=this.listItems.eq(this.currentFocus).nextAll("li").not("[data-disabled='true']").first().length;if(this.currentFocus===this.listItems.length)this.currentFocus-=1;else{if(c&&d){this.listItems.eq(this.currentFocus-1).blur();this.moveDown();return}c&&!d?this.currentFocus-=1:(this.listItems.eq(this.currentFocus-1).blur().end().eq(this.currentFocus).focusin(),this._scrollToView("down"),
this.triggerEvent("moveDown"))}this._callbackSupport(a);return this};e.moveUp=function(a){this.currentFocus-=1;var c="true"===this.listItems.eq(this.currentFocus).attr("data-disabled")?!0:!1,d=this.listItems.eq(this.currentFocus).prevAll("li").not("[data-disabled='true']").first().length;if(-1===this.currentFocus)this.currentFocus+=1;else{if(c&&d){this.listItems.eq(this.currentFocus+1).blur();this.moveUp();return}c&&!d?this.currentFocus+=1:(this.listItems.eq(this.currentFocus+1).blur().end().eq(this.currentFocus).focusin(),
this._scrollToView("up"),this.triggerEvent("moveUp"))}this._callbackSupport(a);return this};e._setCurrentSearchOption=function(a){if((this.options.aggressiveChange||this.options.selectWhenHidden||this.listItems.eq(a).is(":visible"))&&!0!==this.listItems.eq(a).data("disabled"))this.listItems.eq(this.currentFocus).blur(),this.currentFocus=this.currentIndex=a,this.listItems.eq(this.currentFocus).focusin(),this._scrollToView("search"),this.triggerEvent("search");return this};e._searchAlgorithm=function(a,
c){var d=!1,e,k,g,i,l=this.textArray,m=this.currentText;e=a;for(g=l.length;e<g;e+=1){i=l[e];for(k=0;k<g;k+=1)-1!==l[k].search(c)&&(d=!0,k=g);d||(m=this.currentText=this.currentText.charAt(this.currentText.length-1).replace(/[|()\[{.+*?$\\]/g,"\\$0"));c=RegExp(m,"gi");if(3>m.length){if(c=RegExp(m.charAt(0),"gi"),-1!==i.charAt(0).search(c)){this._setCurrentSearchOption(e);if(i.substring(0,m.length).toLowerCase()!==m.toLowerCase()||this.options.similarSearch)this.currentIndex+=1;return!1}}else if(-1!==
i.search(c))return this._setCurrentSearchOption(e),!1;if(i.toLowerCase()===this.currentText.toLowerCase())return this._setCurrentSearchOption(e),this.currentText="",!1}return!0};e.search=function(a,c,d){this.currentText=d?this.currentText+a.replace(/[|()\[{.+*?$\\]/g,"\\$0"):a.replace(/[|()\[{.+*?$\\]/g,"\\$0");this._searchAlgorithm(this.currentIndex,RegExp(this.currentText,"gi"))&&this._searchAlgorithm(0,this.currentText);this._callbackSupport(c);return this};e._applyNativeSelect=function(){var a=
this,c,d,e;a.dropdownContainer.append(a.selectBox);a.selectBox.css({display:"block",width:a.dropdown.outerWidth(),height:a.dropdown.outerHeight(),opacity:"0",position:"absolute",top:"0",left:"0",cursor:"pointer","z-index":"999999",margin:a.dropdown.css("margin"),padding:"0","-webkit-appearance":"menulist-button"}).bind({"changed.selectBoxIt":function(){c=a.selectBox.find("option").filter(":selected");e=(d=c.attr("data-text"))?d:c.text();a._setText(a.dropdownText,e);a.list.find('li[data-val="'+c.val()+
'"]').find("i").attr("class")&&a.dropdownImage.attr("class",a.list.find('li[data-val="'+c.val()+'"]').find("i").attr("class")).addClass("selectboxit-default-icon")}})};e._mobile=function(){this.options.isMobile()&&this._applyNativeSelect();return this};e.selectOption=function(a,c){"number"===(typeof a).toLowerCase()?this.selectBox.val(this.selectBox.find("option").eq(a).val()).change():"string"===(typeof a).toLowerCase()&&this.selectBox.val(a).change();this._callbackSupport(c);return this};e.setOption=
function(b,c,d){var e=this.listItems.eq(0);"showFirstOption"===b&&!c?e.hide():"showFirstOption"===b&&c?e.show():"defaultIcon"===b&&c?this.dropdownImage.attr("class",c+" selectboxit-arrow"):"downArrowIcon"===b&&c?this.downArrow.attr("class",c+" selectboxit-arrow"):"defaultText"===b&&this._setText(this.dropdownText,c);a.Widget.prototype._setOption.apply(this,arguments);this._callbackSupport(d);return this};e.setOptions=function(b,c){var d=this.listItems.eq(0);a.Widget.prototype._setOptions.apply(this,
arguments);this.options.showFirstOption?d.show():d.hide();this.options.defaultIcon&&this.dropdownImage.attr("class",this.options.defaultIcon+" selectboxit-arrow");this.options.downArrowIcon&&this.downArrow.attr("class",this.options.downArrowIcon+" selectboxit-arrow");this.options.defaultText&&this._setText(this.dropdownText,this.options.defaultText);this._callbackSupport(c);return this};e.wait=function(a,c){var d=this;this.returnTimeout(a).then(function(){d._callbackSupport(c)});return d};e.returnTimeout=
function(b){return a.Deferred(function(a){setTimeout(a.resolve,b)})}});(function(a){a(document.body).is("[role]")||a(document.body).attr("role","application");var d=0;a.widget("ui.tooltip",{options:{tooltipClass:"ui-widget-content",content:function(){return a(this).data("tooltip-content")},position:{my:"center bottom",at:"center bottom",offset:"40 40"}},_init:function(){var c=this;this.showTimeout=null;this.tooltip=a("<div></div>").attr("id","ui-tooltip-"+d++).attr("role","tooltip").attr("aria-hidden","true").addClass("ui-tooltip ui-widget ui-corner-all").addClass(this.options.tooltipClass).appendTo(document.body).hide();
this.tooltipContent=a("<div></div>").addClass("ui-tooltip-content").appendTo(this.tooltip);this.opacity=this.tooltip.css("opacity");this.element.on("focus.tooltip mouseenter.tooltip",function(a){c.open(a)}).on("blur.tooltip mouseleave.tooltip",function(a){c.close(a)}).data("tooltip-content",this.element.attr("title"))},enable:function(){this.options.disabled=!1},disable:function(){this.options.disabled=!0},destroy:function(){this.tooltip.remove();a.Widget.prototype.destroy.apply(this,arguments)},
widget:function(){return this.element.pushStack(this.tooltip.get())},open:function(a){var d=this.element;if(!(this.current&&this.current[0]==d[0])){var b=this;this.current=d;d.removeAttr("title");var f=this.options.content.call(d[0],function(f){setTimeout(function(){b.current==d&&b._show(a,d,f)},13)});f&&(b.showTimeout=setTimeout(function(){b._show(a,d,f)},200))}},_show:function(c,d,b){b&&!this.options.disabled&&(this.tooltipContent.html(b),this.tooltip.css({top:0,left:0}).show().position(a.extend({of:d},
this.options.position)).hide(),parseInt(this.tooltip.css("left").replace(/px/,""))+this.tooltip.width()>window.innerWidth&&this.tooltip.css("left",window.innerWidth-(this.tooltip.width()+this.tooltip.width()/2)+"px"),this.tooltip.attr("aria-hidden","false"),d.attr("aria-describedby",this.tooltip.attr("id")),this.tooltip.stop(!1,!0).fadeIn(),this._trigger("open",c))},close:function(a){if(this.current){var d=this.current.attr("title",this.options.content.call(this.current));this.current=null;this.options.disabled||
(clearTimeout(this.showTimeout),d.removeAttr("aria-describedby"),this.tooltip.attr("aria-hidden","true"),this.tooltip.stop(!1,!0).fadeOut(),this._trigger("close",a))}}})})(jQuery);(function(a,d,c){function e(a,b){var c=d.createElement(a||"div"),e;for(e in b)c[e]=b[e];return c}function b(a){for(var b=1,c=arguments.length;b<c;b++)a.appendChild(arguments[b]);return a}function f(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),c=0.01+100*(c/d),d=Math.max(1-(1-a)/b*(100-c),a),f=m.substring(0,m.indexOf("Animation")).toLowerCase();l[e]||(p.insertRule("@"+(f&&"-"+f+"-"||"")+"keyframes "+e+"{0%{opacity:"+d+"}"+c+"%{opacity:"+a+"}"+(c+0.01)+"%{opacity:1}"+(c+b)%100+"%{opacity:"+
a+"}100%{opacity:"+d+"}}",0),l[e]=1);return e}function h(a,b){var d=a.style,e,f;if(d[b]!==c)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(f=0;f<i.length;f++)if(e=i[f]+b,d[e]!==c)return e}function j(a,b){for(var c in b)a.style[h(a,c)||c]=b[c];return a}function k(a){for(var b=1;b<arguments.length;b++){var d=arguments[b],e;for(e in d)a[e]===c&&(a[e]=d[e])}return a}function g(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}var i=["webkit",
"Moz","ms","O"],l={},m,p=function(){var a=e("style");b(d.getElementsByTagName("head")[0],a);return a.sheet||a.styleSheet}(),q={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:0.25,fps:20,zIndex:2E9,className:"spinner",top:"auto",left:"auto"},n=function o(a){if(!this.spin)return new o(a);this.opts=k(a||{},o.defaults,q)};n.defaults={};k(n.prototype,{spin:function(a){this.stop();var b=this,c=b.opts,d=b.el=j(e(0,{className:c.className}),{position:"relative",zIndex:c.zIndex}),
f=c.radius+c.length+c.width,i,h;a&&(a.insertBefore(d,a.firstChild||null),h=g(a),i=g(d),j(d,{left:("auto"==c.left?h.x-i.x+(a.offsetWidth>>1):c.left+f)+"px",top:("auto"==c.top?h.y-i.y+(a.offsetHeight>>1):c.top+f)+"px"}));d.setAttribute("aria-role","progressbar");b.lines(d,b.opts);if(!m){var k=0,l=c.fps,n=l/c.speed,p=(1-c.opacity)/(n*c.trail/100),q=n/c.lines;(function w(){k++;for(var a=c.lines;a;a--){var e=Math.max(1-(k+a*q)%n*p,c.opacity);b.opacity(d,c.lines-a,e,c)}b.timeout=b.el&&setTimeout(w,~~(1E3/
l))})()}return b},stop:function(){var a=this.el;a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=c);return this},lines:function(a,c){function d(a,b){return j(e(),{position:"absolute",width:c.length+c.width+"px",height:c.width+"px",background:a,boxShadow:b,transformOrigin:"left",transform:"rotate("+~~(360/c.lines*g+c.rotate)+"deg) translate("+c.radius+"px,0)",borderRadius:(c.width>>1)+"px"})}for(var g=0,i;g<c.lines;g++)i=j(e(),{position:"absolute",top:1+~(c.width/2)+
"px",transform:c.hwaccel?"translate3d(0,0,0)":"",opacity:c.opacity,animation:m&&f(c.opacity,c.trail,g,c.lines)+" "+1/c.speed+"s linear infinite"}),c.shadow&&b(i,j(d("#000","0 0 4px #000"),{top:"2px"})),b(a,b(i,d(c.color,"0 0 1px rgba(0,0,0,.1)")));return a},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});(function(){function a(b,c){return e("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}var c=j(e("group"),{behavior:"url(#default#VML)"});!h(c,
"transform")&&c.adj?(p.addRule(".spin-vml","behavior:url(#default#VML)"),n.prototype.lines=function(c,d){function e(){return j(a("group",{coordsize:i+" "+i,coordorigin:-g+" "+-g}),{width:i,height:i})}function f(c,h,i){b(k,b(j(e(),{rotation:360/d.lines*c+"deg",left:~~h}),b(j(a("roundrect",{arcsize:1}),{width:g,height:d.width,left:d.radius,top:-d.width>>1,filter:i}),a("fill",{color:d.color,opacity:d.opacity}),a("stroke",{opacity:0}))))}var g=d.length+d.width,i=2*g,h=2*-(d.width+d.length)+"px",k=j(e(),
{position:"absolute",top:h,left:h});if(d.shadow)for(h=1;h<=d.lines;h++)f(h,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(h=1;h<=d.lines;h++)f(h);return b(c,k)},n.prototype.opacity=function(a,b,c,d){a=a.firstChild;d=d.shadow&&d.lines||0;if(a&&b+d<a.childNodes.length&&(a=(a=(a=a.childNodes[b+d])&&a.firstChild)&&a.firstChild))a.opacity=c}):m=h(c,"animation")})();a.Spinner=n})(window,document);
jQuery.fn.spin=function(a){this.each(function(){var d=$(this),c=d.data();c.spinner&&(c.spinner.stop(),delete c.spinner);!1!==a&&(c.spinner=(new Spinner($.extend({color:d.css("color")},a))).spin(this))});return this};(function(){$.klear=$.klear||{};$.klear.baseurl=$.klear.baseurl||$("base").attr("href");$.klear.loadedTemplates=$.klear.loadedTemplates||{};$.ajax({url:$.klear.baseurl+"../klear/template/cache",dataType:"json",success:function(a){if(a.templates)for(var d in a.templates)$.template(d,a.templates[d]),$.klear.loadedTemplates[d]=!0}})})();
