jQuery.cookie=function(a,b,d){if(1<arguments.length&&(null===b||"object"!==typeof b)){d=jQuery.extend({},d);null===b&&(d.expires=-1);if("number"===typeof d.expires){var c=d.expires,e=d.expires=new Date;e.setDate(e.getDate()+c)}return document.cookie=[encodeURIComponent(a),"=",d.raw?""+b:encodeURIComponent(""+b),d.expires?"; expires="+d.expires.toUTCString():"",d.path?"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure":""].join("")}d=b||{};e=d.raw?function(a){return a}:decodeURIComponent;
return(c=RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)").exec(document.cookie))?e(c[1]):null};(function(a){a.extend({getStylesheet:function(b,d,c){a("link[type='text/css']",a("head:first"));var d=d||"rand"+Math.floor(1E4*Math.random()),e=a("link#"+d,a("head:first"));0<e.length?e.attr("href",b):a("<link />",{href:b,media:c||"screen",type:"text/css",rel:"stylesheet",id:d}).appendTo("head:first")},removeStylesheet:function(b){try{a("link#"+b).remove()}catch(d){}}})})(jQuery);(function(a){a.klear=a.klear||{};a.klear.errors={};a.klear.addErrors=function(b){a.extend(a.klear.errors,b)};a.klear.fetchErrorByCode=function(b){return"undefined"!=typeof a.klear.errors[b]?a.klear.errors[b]:!1}})(jQuery);(function(a){a.widget("klear.moduleDialog",a.ui.dialog,{_superClass:a.ui.dialog.prototype,_getKlearPosition:function(){return this.options.klearPosition?a(this.options.klearPosition):document.body},_makeDraggable:function(){this.uiDialog.draggable({handle:".ui-dialog-titlebar",containment:this._getKlearPosition()})},_create:function(){this.originalTitle=this.element.attr("title");this.options.isHidden=!1;"string"!==typeof this.originalTitle&&(this.originalTitle="");this.options.title=this.options.title||
this.originalTitle;var b=this,d=b.options,c=d.title||"&#160;",e=a.ui.dialog.getTitleId(b.element),f=(b.uiDialog=a("<div></div>")).appendTo(this._getKlearPosition()).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+d.dialogClass).css({zIndex:d.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(c){if(d.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE){b.close(c);c.preventDefault()}}).attr({role:"dialog","aria-labelledby":e}).mousedown(function(a){b.moveToTop(false,
a)});b.element.show().removeAttr("title").css("height","auto ").addClass("ui-dialog-content ui-widget-content").appendTo(f);var g=(b.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(f),h=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){h.addClass("ui-state-hover")},function(){h.removeClass("ui-state-hover")}).focus(function(){h.addClass("ui-state-focus")}).blur(function(){h.removeClass("ui-state-focus")}).click(function(a){b.close(a);
return false}).appendTo(g);(b.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(d.closeText).appendTo(h);a("<span></span>").addClass("ui-dialog-title").attr("id",e).html(c).prependTo(g);a.isFunction(d.beforeclose)&&!a.isFunction(d.beforeClose)&&(d.beforeClose=d.beforeclose);g.find("*").add(g).disableSelection();d.draggable&&a.fn.draggable&&b._makeDraggable();d.resizable&&a.fn.resizable&&b._makeResizable();b._createButtons(d.buttons);b._isOpen=!1;a.fn.bgiframe&&
f.bgiframe()},close:function(b){var d=this,c,e,f=this._getKlearPosition(),g=f.attr("id");a(window).off("scroll."+g);f.css("overflow","auto");if(!1!==d._trigger("beforeClose",b))return d.overlay&&d.overlay.destroy(),d.uiDialog.unbind("keypress.ui-dialog"),d._isOpen=!1,d.options.hide?d.uiDialog.hide(d.options.hide,function(){d._trigger("close",b)}):(d.uiDialog.hide(),d._trigger("close",b)),a.ui.dialog.overlay.resize(),d.options.modal&&(c=0,a(".ui-dialog").each(function(){if(this!==d.uiDialog[0]){e=
a(this).css("z-index");isNaN(e)||(c=Math.max(c,e))}}),a.ui.dialog.maxZ=c),d},open:function(){if(!this._isOpen){var b=this,d=b.options,c=b.uiDialog;b.overlay=d.modal?new a.ui.dialog.overlay(b):null;b.overlay.$el.appendTo(this._getKlearPosition());var e=this._getKlearPosition(),f=e.attr("id");e.css("overflow","hidden");b._size();b._position(d.position);e=this._getNewPosition();c.css("top",e.top+"px").css("left",e.left+"px");a(b.element).css("height","auto");c.show(d.show);b.moveToTop(!0);a(window).on("scroll."+
f,function(){var c=b._getNewPosition();a(b.uiDialog).stop().animate({top:Math.abs(c.top)+"px",left:Math.abs(c.left)+"px"},{duration:350,complete:function(){0>parseFloat(a(this).css("top"))&&a(this).css("top","0px")}})});d.modal&&c.bind("keydown.ui-dialog",function(c){if(c.keyCode===a.ui.keyCode.TAB){var b=a(":tabbable",this),d=b.filter(":first"),b=b.filter(":last");if(c.target===b[0]&&!c.shiftKey)return d.focus(1),!1;if(c.target===d[0]&&c.shiftKey)return b.focus(1),!1}});a(b.element.find(":tabbable").get().concat(c.find(".ui-dialog-buttonpane :tabbable").get().concat(c.get()))).eq(0).focus();
b._isOpen=!0;b._trigger("open");return b}},getContext:function(){return this.element},updateContent:function(b){var d=this;d._getKlearPosition().css("overflow","hidden");a(this.element).slideUp("fast",function(){a(this).html(b).css("height","auto");var c=d._getNewPosition();a(this).slideDown(function(){a(d.uiDialog).stop().animate({top:c.top+"px",left:c.left+"px"});a(window).trigger("scroll."+d._getKlearPosition().attr("id"))})})},updateTitle:function(b){a(".ui-dialog-title",this.uiDialogTitlebar).html(b)},
setAsLoading:function(){a(this.element).html('<br /><div class="loadingCircle"></div><div class="loadingCircle1"></div>')},_getNewPosition:function(){var b=a(window).scrollTop()+this._getKlearPosition().offset().top-a(this.uiDialog).height()/2;10>b&&(b=10);var d=this._getKlearPosition().width()/2-a(this.uiDialog).width()/2;return{top:b,left:d}}});a.extend(a.ui.dialog.overlay,{create:function(b){var d="klearModule"==b.widgetName&&a(b.element).moduleDialog("option","klearPosition")?a(b.element).moduleDialog("option",
"klearPosition"):document;0===this.instances.length&&(a(d).bind("keydown.dialog-overlay",function(c){a(d).is(":visible")&&(b.options.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE)&&(b.close(c),c.preventDefault())}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));d==document&&(d=document.body);var c=a("<div></div>").addClass("ui-widget-overlay").appendTo(d).css({width:this.width(),height:this.height()});this.instances.push(c);return c}})})(jQuery);(function(a){a.klear=a.klear||{};a.klear.loadedScripts={};a.klear.loadedTemplates={};a.widget("klear.module",{_create:function(){a.klear.module.instances.push(this.element)},_init:function(){this._initOptions();this.setAsloading();this._initTab()},destroy:function(){a(this.options.menuLink).removeClass("ui-state-highlight");var b=a.inArray(this.element,a.klear.module.instances);-1<b&&a.klear.module.instances.splice(b,1);a.Widget.prototype.destroy.call(this)},_setOptions:function(){a.Widget.prototype._setOptions.apply(this,
arguments)},_setOption:function(b,d){"mainModuleLoaded"===b&&d?this.setMainLoaded():"addToBeLoadedFile"===b?(this.totalToBeLoadedItems+=d,this.updateTotalLoadingItems()):"addLoadedFile"===b?(this.totalLoadedItems++,this.updateCurrentLoadingItem()):a.Widget.prototype._setOption.apply(this,arguments)},enable:function(){},disable:function(){},_trigger:function(){},_getOtherInstances:function(){var b=this.element;return a.grep(a.klear.module.instances,function(a){return a!==b})},options:{ui:null,container:null,
mainEnl:null,title:null,file:null,filesUploading:{},panel:null,tabIndex:null,baseurl:null,menuLink:null,screen:null,dialog:null,dispatchOptions:{},tabLock:!1,parentScreen:!1,moduleDialog:null,PostDispatchMethod:null,PreDispatchMethod:null},_initOptions:function(){this.options.mainEnl=a("a:first",this.element);this.options.title=a("a:first",this.element).html();this.options.file=a("a:first",this.element).attr("href").replace(/\#tabs\-([^\_]+).*/,"$1");this.options.panel=this.options.ui.panel;this.options.tabIndex=
this.options.ui.index;0<a("#target-"+this.options.file).length&&(this.options.menuLink=a("#target-"+this.options.file))},_initTab:function(){if(this.options.menuLink&&!(0>=a("span.ui-silk",this.options.menuLink).length)){var b=this.options.mainEnl;a("span.ui-silk",this.element).attr("class",this._getTabIconClass()).on("click",function(){a(b).trigger("click")});var d=this;a(this.options.ui.tab).on("mouseup",function(c){button=null==c.which?2>c.button?"LEFT":4==c.button?"MIDDLE":"RIGHT":2>c.which?"LEFT":
2==c.which?"MIDDLE":"RIGHT";if("MIDDLE"==button){c.stopPropagation();c.preventDefault();var b=a(this).attr("href");a(this).removeAttr("href");var f=a(this);setTimeout(function(){f.attr("href",b)},100);d.close()}})}},reload:function(){this._initTab()},dispatch:function(){var b={file:this.options.file};a.extend(b,this.options.dispatchOptions);"function"==typeof this.options.PreDispatchMethod&&this.options.PreDispatchMethod.apply(this);a.klear.request(b,this._parseDispatchResponse,this._errorResponse,
this)},_errorResponse:function(){this.setAsloaded();var b='<span class="ui-silk inline dialogTitle '+this._getTabIconClass()+' "></span>',d=[],d=arguments[0]&&void 0!=arguments[0].message?arguments[0].message:Array.prototype.join.call(arguments,"</em><br /><em>",["klear.module"]);this.showDialogError(a.translate("Module registration error.",["klear.module"])+"<br /><br />"+a.translate("Error: %s.","<em>"+d+"</em>"),{title:a.translate("Klear Module Error",["klear.module"])+" - "+b+"",closeTab:this.options.tabIndex})},
_parseDispatchResponse:function(b){this.setAsloaded();a(this.options.panel).html("");b.mainTemplate&&(b.data.mainTemplate=b.mainTemplate);a(this.element)[b.plugin]({data:b.data});"function"==typeof this.options.PostDispatchMethod&&this.options.PostDispatchMethod.apply(this)},reDispatch:function(){this.setAsloading();this.dispatch()},getPanel:function(){return this.options.panel},getContainer:function(){return this.options.container},close:function(b){if(this.isLocked())if(a(this.options.container).tabs("select",
this.options.tabIndex),"function"==typeof this.options.tabLock){if(this.options.tabLock())return}else this.showInlineWarn(a.translate("This tab is locked.",["klear.module"]));var d=!1,c;for(c in this.options.filesUploading){d=!0;break}d?self.element.klearModule("showDialog",a.translate("Upload in progress.",["klear.module"])+"<br />"+a.translate("Close the screen?",["klear.module"]),{title:a.translate("Attention!",["klear.module"]),buttons:[{text:a.translate("Cancel",["klear.module"]),click:function(){a(this).moduleDialog("close")}},
{text:a.translate("Ignore changes and close",["klear.module"]),click:function(){self.element.klearModule("unsetAllUploadsInProgress");self.element.klearModule("close")}}]}):(b&&(b.callback&&"function"==typeof b.callback)&&b.callback(),a(this.options.container).tabs("remove",this.options.tabIndex))},getModuleDialog:function(){return this.options.moduleDialog},dialogMessageTmpl:'<div class="ui-widget"><div class="ui-state-${state} ui-corner-all inlineMessage"><p><span class="ui-icon ${icon} inlineMessage-icon"></span>{{html text}}</p></div></div>',
showDialog:function(b,d){var c={icon:d.icon||"ui-icon-info",state:d.state||"highlight",text:b,resizable:d.resizable||!1,buttons:d.buttons||null},e=a.tmpl(d.template||this.dialogMessageTmpl,c),f=d.dialogType||"moduleDialog",g=this,h=g._getTabIconClass(),i=!1===d.title?!1:'<span class="ui-icon  inlineMessage-icon dialogTitle '+c.icon+' "></span>'+d.title+""||'<span class="ui-silk inline dialogTitle '+h+' "></span>'+this.options.title+"",j=d.width||300,k=d.height||160,m=0==d.closeTab||d.closeTab?d.closeTab.toString():
!1;"moduleDialog"==f?(this.options.moduleDialog=e,this.options.moduleDialog.moduleDialog({position:{my:"center bottom",at:"center center",collision:"none"},buttons:c.buttons,title:i,modal:!0,width:j,height:k,resizable:c.resizable,klearPosition:this.getPanel(),open:function(){a(g.options.ui.tab).addClass("ui-state-disabled")},close:function(){a(this).moduleDialog("option","isHidden")||(a(g.options.ui.tab).removeClass("ui-state-disabled"),a(this).remove(),m&&g.close())}})):e.dialog({title:'<span class="ui-silk inline dialogTitle '+
h+' "></span>'+this.options.title+"",modal:d.modal||!1,close:function(){a(this).remove();m&&g.close()}})},showDialogMessage:function(b,d){var c={type:"msg",dialogType:"moduleDialog"},d=d||{};a.extend(c,d);this.showDialog(b,c)},showDialogWarn:function(b,d){var c={type:"warn",icon:"ui-icon-alert",dialogType:"moduleDialog"},d=d||{};a.extend(c,d);this.showDialog(b,c)},showDialogError:function(b,d){var c={type:"error",icon:"ui-icon-alert",state:"highlight",dialogType:"moduleDialog"},d=d||{};a.extend(c,
d);this.showDialog(b,c)},isLocked:function(){return!1!==this.options.tabLock},lockTab:function(a){"function"==typeof a?this._setOption("tabLock",a):this._setOption("tabLock",!0)},unLockTab:function(){this._setOption("tabLock",!1)},setAsChanged:function(a){this.element.addClass("changed");this.lockTab(a)},setAsUnChanged:function(){this.element.removeClass("changed");this.unLockTab()},setUploadInProgress:function(a){this.options.filesUploading[a]=!0},unsetUploadInProgress:function(a){this.options.filesUploading[a]&&
delete this.options.filesUploading[a]},unsetAllUploadsInProgress:function(){for(idx in this.options.filesUploading)delete this.options.filesUploading[idx]},_getTabIconClass:function(){return this.options.menuLink&&0<a("span.ui-silk",this.options.menuLink).length?a("span.ui-silk",this.options.menuLink).attr("class"):this.options.menuLink&&0<a("span.ui-silk",this.options.menuLink.parent()).length?a("span.ui-silk",this.options.menuLink.parent()).attr("class"):""},inlineMessageTmpl:'<div class="ui-widget"><div class="ui-state-${state} ui-corner-all inlineMessage"><p><span class="ui-icon ${icon} inlineMessage-icon"></span>{{html text}}</p></div></div>',
showInline:function(b,d){var c=a.tmpl(this.inlineMessageTmpl,{icon:d.icon?d.icon:"ui-icon-info",state:d.state?d.state:"highlight",text:b});c.prependTo(this.options.panel);var e=parseInt(d.timeout);0<d.timeout&&window.setTimeout(function(){c.fadeOut(function(){c.remove();d.fn&&"function"==typeof d.fn&&fn()})},e)},showInlineMessage:function(a,d,c){this.showInline(a,{type:"msg",fn:d||null,timeout:0==c||c?c:5E3})},showInlineWarn:function(a,d,c){this.showInline(a,{type:"warn",fn:d||null,timeout:0==c||
c?c:5E3,icon:"ui-icon-alert"})},showInlineError:function(a,d,c){this.showInline(a,{type:"error",fn:d||null,timeout:0==c||c?c:5E3,state:"error",icon:"ui-icon-alert"})},dialog:function(b){a("<div title='Aviso'>"+b+"</div>").dialog({open:function(){},position:"center",draggable:!1,resizable:!1})},highlightOn:function(){a(this.element).addClass("ui-state-highlight")},highlightOff:function(){a(this.element).removeClass("ui-state-highlight")},_loading:!1,setAsloading:function(){this._loading=!0;this.updateLoader()},
setAsloaded:function(){this._loading=!1;this.updateLoader()},loadingTmpl:['<div id="loadingTemplate" class="loadingPanel ui-widget-content ui-corner-all">',"<p>${loadingText}</p>",'<p class="extra main">${loadingTextMain}<span class="ui-icon ui-icon-circle-check inline"></span></p>','<p class="extra">${loadingTextExtra}(<span class="current">0</span>/<span class="total">?</span>)<span class="ui-icon ui-icon-circle-check inline"></span></p>',"</div>"],totalToBeLoadedItems:0,totalLoadedItems:0,updateTotalLoadingItems:function(){var b=
a(this.options.panel);a(".loadingPanel",b).find(".total").html(this.totalToBeLoadedItems)},updateCurrentLoadingItem:function(){var b=a(this.options.panel),d=20<100*this.totalLoadedItems/this.totalToBeLoadedItems?100*this.totalLoadedItems/this.totalToBeLoadedItems/100:".2";a(".loadingPanel",b).find(".current").css("opacity",d).html(this.totalLoadedItems)},setMainLoaded:function(){var b=a(this.options.panel);a(".loadingPanel",b).find("p.main").addClass("complete")},updateLoader:function(){var b=a(this.options.panel);
if(0==a(".loadingPanel",b).length)d=a.tmpl(this.loadingTmpl.join(""),{loadingText:a.translate("Loading content",["klear.module"]),loadingTextMain:a.translate("Loading Main Module",["klear.module"]),loadingTextExtra:a.translate("Loading Secondary modules",["klear.module"])}),d.removeAttr("id").spin({lines:8,length:18,width:4,radius:10,trail:100,speed:1.2}).hide().appendTo(b);else var d=a(".loadingPanel",b);a("<div />").addClass("overlay").css({opacity:"0.6",width:b.width()+"px",height:b.height()+"px"}).appendTo(b);
this._loading?(d.show(),a(this.options.ui.tab).addClass("ui-state-disabled")):a(this.options.ui.tab).removeClass("ui-state-disabled")},updateTitle:function(b){b&&""!=b&&a(this.options.ui.tab).html(b)}});a.extend(a.klear.module,{instances:[]});a.widget.bridge("klearModule",a.klear.module)})(jQuery);(function(a){a.klear=a.klear||{};a.klear.cacheEnabled=!0;a.klear.removeCache=function(){a.klear.loadedScripts={};a.klear.loadedTemplates={}};a.klear.errorCodes={auth:["1002"]};a.klear.buildRequest=function(b){var d={controller:"index",action:"dispatch",file:"index",post:!1};a.extend(d,b);var c={};a.each("execute type file screen dialog command pk language str namespace".split(" "),function(a,b){d[b]&&(c[b]=d[b])});var b=d.post?"post":"get",e=void 0!=d.async?d.async:!0,f=a.klear.baseurl+d.controller+
"/"+d.action;"post"==b?(f+="?"+a.param(c),_data=d.post):_data=c;return{action:f,data:_data,type:b,async:e}};a.klear.requestTranslations=[];a.klear.requestSearchTranslations=function(){a('script[src*="js/translation"]',a("head")).each(function(){a.klear.requestTranslations.push(a(this).attr("src"))})};a.klear.requestReloadTranslations=function(){for(var b=a.klear.requestTranslations.length,d={},c=[],e=0;e<b;e++)if(void 0==d[a.klear.requestTranslations[e]]){d[a.klear.requestTranslations[e]]=!0;var f=
a('script[src="'+a.klear.requestTranslations[e]+'"]');0<f.length&&f.remove();a.ajax({url:a.klear.requestTranslations[e]+"?"+(new Date).getTime()+"&language="+a.klear.language,dataType:"script",type:"get",cache:!0,async:!0,success:function(){},error:function(){}});c.push(a.klear.requestTranslations[e])}a.klear.requestTranslations=c};a.klear.request=function(b,d,c,e){var f=arguments,g=function(){f.callee.apply(f.callee,Array.prototype.slice.call(f))},h="",i="",j=e&&e.element?function(c,b){a(e.element).klearModule("option",
c,b||!0)}:function(){},k=function(b){for(var f="baseurl templates scripts css data plugin".split(" "),l=0;l<f.length;l++)if("undefined"==typeof b[f[l]]){c.apply(e,[a.translate("Module registration error.",["klear.buildRequest"])]);return}h=b.baseurl;i=b.cleanBaseurl;f=function(a,c){var b=0;for(c in a)b++;return b};a.when(m(b.templates,f(b.templates,"template")),q(b.css,f(b.css,"css")),p(b.scripts,f(b.scripts,"scripts"))).done(function(){var f=0;(function u(){!1===b.plugin||"function"==typeof a.fn[b.plugin]?
d.apply(e,[b]):20==++f?c.apply(e,[b.plugin+" plugin not found"]):window.setTimeout(u,20)})()}).fail(function(b){c.apply(e,[a.translate("Module registration error.",["klear.buildRequest"]),b])})},m=function(c,b){var d=a.Deferred();j("addToBeLoadedFile",b);if(0==b)d.resolve();else{var e=0,f=function(){j("addLoadedFile");b--;e++;0==b&&d.resolve(e)},l="";a.each(c,function(c,b){a.klear.cacheEnabled&&a.klear.loadedTemplates[c]?f():(l="object"==typeof b&&"undefined"!=typeof b.module?i+"/"+b.module+b.tmpl:
h+b,a.ajax({url:l,dataType:"text",type:"get",cache:!0,success:function(b){a.template(c,b);a.klear.loadedTemplates[c]=!0;f()},error:function(){d.reject(a.translate("Error downloading template [%s].",c,["klear.buildRequest"]))}}))});return d.promise()}},o=function(c){c.match(/js\/translation/)&&a.klear.requestTranslations.push(c)},p=function(c,b){var d=a.Deferred();j("addToBeLoadedFile",b);if(0==b)d.resolve();else{var e=0,f=!1;a.each(c,function(c,l){if(a.klear.cacheEnabled&&a.klear.loadedScripts[c])j("addLoadedFile"),
b--;else if(""==l)j("addLoadedFile"),b--;else{f=!0;var r="";"object"==typeof l&&"undefined"!=typeof l.module?r=i+"/"+l.module+l.tmpl:(r=h+l,o(r));try{a.ajax({url:r,dataType:"script",type:"get",cache:!0,async:!0,success:function(){a.klear.loadedScripts[c]=true;j("addLoadedFile");b--;e++;b==0&&d.resolve(e)},error:function(){d.reject("Error downloading script ["+l+"]")}})}catch(s){console.log(s)}}});return f?d.promise():d.resolve(0)}},q=function(c,b){var d=a.Deferred();j("addToBeLoadedFile",b);if(0==
b)d.resolve();else{for(var e in c)a.getStylesheet(h+c[e],e),a("#"+e).on("load",function(){j("addLoadedFile");b--;0==b&&d.resolve(!0)});d.promise(!0)}},n=a.klear.buildRequest(b);if(b.external){var t="ftarget"+Math.round(Math.random(1E3,1E3)),l=a("<iframe />",{name:t}).hide(),s=a("<form />").attr({action:n.action,method:n.type,target:t});a.each(a.param(n.data).split("&"),function(c,b){var d=b.split("=");a("<input>").attr("name",decodeURIComponent(d[0])).attr("type","hidden").val(d[1]).appendTo(s)});
l.appendTo("body");s.appendTo("body").on("submit",function(){var c=a(this);setTimeout(function(){c.remove();l.remove()},1E5)}).trigger("submit");"function"==typeof d&&d(!0);return!1}a.ajax({url:n.action,dataType:"json",context:this,data:n.data,async:n.async,type:n.type,success:function(f){if(null!=f)if(f.mustLogIn&&"login"!=b.controller)b.isLogin||a.klear.hello("rememberCallback",g),a.klear.login();else switch(a.klear.login("close"),j("mainModuleLoaded"),f.responseType){case "dispatch":return k(f);
case "simple":f.data?d.apply(e,[f.data]):c.apply(e,[a.translate("Unknown response format in Simple Response",["klear.buildRequest"])]);break;case "redirect":window.location=f.data;break;default:c.apply(e,["Unknown response type"])}},error:function(d){try{var f=a.parseJSON(d.responseText)}catch(l){f={message:a.translate("Undefined Error",["klear.buildRequest"]),raw:d.responseText}}f.mustLogIn&&"login"!=b.controller||-1!=a.inArray(f.code,a.klear.errorCodes.auth)?(b.isLogin||a.klear.hello("setCallback",
g),a.klear.login()):c.apply(e,[f])}})}})(jQuery);(function(a){a.xui||(a.xui={});var b=a.extend({},a.ui.tabs.prototype),d=b._create,c=b._update;a.xui.tabs=a.extend(b,{options:a.extend({},b.options,{scrollable:!1,closable:!1,animationSpeed:500}),_create:function(){var c=this.options;d.apply(this);if(c.scrollable){var b=this.element;b.parent().is(".ui-scrollable-tabs")&&b.parent(".ui-scrollable-tabs").replaceWith(b);b.parent().width();var g=b.wrap("<div></div>").parent().addClass("ui-scrollable-tabs ui-widget-content ui-corner-all"),h=this.element.find(".ui-tabs-nav:first").removeClass("ui-corner-all"),
i=a('<ol class="ui-helper-reset ui-helper-clearfix ui-tabs-nav-arrows"></ol>').prependTo(g),j=a('<li class="ui-tabs-arrow-previous ui-state-default ui-widget-content" title="Previous"><a href="#"><span class="ui-icon ui-icon-carat-1-w">Previous tab</span></a></li>').prependTo(i),k=a('<li class="ui-tabs-arrow-next ui-state-default ui-widget-content" title="Next"><a href="#"><span class="ui-icon ui-icon-carat-1-e">Next tab</span></a></li>').appendTo(i);a.fn.reverse=[].reverse;var m=function(a){var c=
{};c.right=a.next("li").length!=0?a.next("li")[0].offsetLeft+15:a[0].offsetLeft+a.outerWidth(true);c.right=c.right+h[0].offsetLeft>i.width();c.left=a[0].offsetLeft+h[0].offsetLeft<0+(j.is(":visible")?j.outerWidth():0);return c},o=function(a,b){if(a!="none")if(a=="left"){j.show("fade");b.next("li").length==0&&k.hide("fade");var d=0,d=b.next("li").length!=0?b.next("li")[0].offsetLeft:b[0].offsetLeft+b.outerWidth(true),d=i.width()-d,d=d-(b.next("li").length==0?1:k.outerWidth());h.animate({"margin-left":d+
"px"},c.animationSpeed)}else{k.show("fade");b.prev("li").length==0&&j.hide("fade");d=0;d=b.prev("li").length==0?2:j.outerWidth()+2;d=(b[0].offsetLeft-d)*-1;h.animate({"margin-left":d},c.animationSpeed)}},p=function(a){return a?a?a[0].offsetLeft+a.outerWidth(true):h.find("li:last")[0].offsetLeft+h.find("li:last").outerWidth(true):0},q=function(){if(p()>i.width())k.show("fade");else{k.hide("fade");j.hide("fade");h.css("margin-left",0)}},n=function(d){c.closable&&(d||h.addClass("ui-tabs-closable").find("li")).each(function(){var c=
a(this).addClass("stHasCloseBtn");a(this).append(a("<span/>").addClass("ui-state-default ui-corner-all ui-tabs-close").hover(function(){a(this).toggleClass("ui-state-hover")}).append(a("<span/>").addClass("ui-icon ui-icon-circle-close").html("Close").attr("title","Close this tab").click(function(){b.tabs("remove",c.prevAll("li").length)})))})};a.fn.refreshTabs=function(){var a=h.find("li.ui-tabs-selected");b.trigger("tabsselect",[{tab:a.find("a")}]);if(p()>i.width()){a.next("li").length!=0&&k.show("fade");
a=h.find("li:last");a=a[0].offsetLeft+a.outerWidth(true);a=i.width()-h[0].offsetLeft-a;if(a>1){h.css("margin-left",h[0].offsetLeft+a-1);k.hide("fade")}}else{k.hide("fade");j.hide("fade");h.css("margin-left",0)}};(function(){n();q();k.on("click",function(a){a.preventDefault();a.stopPropagation();a=h.find("li.ui-tabs-selected").next("li");a.length&&a.find("a").trigger("click")});j.on("click",function(a){a.preventDefault();a.stopPropagation();a=h.find("li.ui-tabs-selected").prev("li");a.length&&a.find("a").trigger("click")});
b.bind("tabsselect",function(c,b){var d=a(b.tab).parent();d.next("li").length==0&&k.hide("fade");var e=m(d);o(e.right?"left":e.left?"right":"none",d)}).bind("tabsadd",function(c,b){a(b.tab).parent();k.show("fade")}).bind("tabsremove",function(){if(c.closable){if(b.tabs("length")==1){b.find("li .ui-tabs-close").hide();h.removeClass("ui-tabs-closable");b.trigger("tabsselect")}if(p()<i.width()){k.hide("fade");j.hide("fade")}else{m(h.find("li:last")).right||o("left",h.find("li:last"));q()}}})})()}return this},
_update:function(){c.apply(this)}});a.widget("xui.tabs",a.xui.tabs)})(jQuery);(function(a){a.extend({translate:function(b){var d=arguments,c=arguments.length;if(0>=c)return"0";var e=null;1<c&&"object"==typeof arguments[c-1]&&(e=arguments[c-1][0]);var f=b.replace(/'/g,"").replace(/"/g,"");void 0==a.translations[f]?void 0!=a.translationRegister&&a.translationRegister(b,e):b=a.translations[f];c=null==e?c:c-1;for(e=1;e<c;e++)void 0!=d[e]&&(b=b.replace(/%s/,d[e]));return b},addTranslation:function(b){a.extend(a.translations,b)},translations:{}})})(jQuery);(function reLoader(){"undefined"==typeof jQuery||"undefined"==typeof jQuery.klear?setTimeout(reLoader,100):$.extend({translationRegister:function(b,d){$.klear.request({controller:"index",action:"registertranslation",namespace:"javascript/"+d,str:b},function(){},function(){})}})})();(function(a){a(window.jQuery,window,document)})(function(a,b,d){a.widget("selectBox.selectBoxIt",{VERSION:"2.9.9",options:{showEffect:"none",showEffectOptions:{},showEffectSpeed:"medium",hideEffect:"none",hideEffectOptions:{},hideEffectSpeed:"medium",showFirstOption:!0,defaultText:"",defaultIcon:"",downArrowIcon:"",theme:"bootstrap",keydownOpen:!0,isMobile:function(){return/iPhone|iPod|iPad|Android|BlackBerry|Opera Mini|IEMobile/.test(navigator.userAgent||navigator.vendor||b.opera)},nostyle:!1,"native":!1,
aggressiveChange:!1,selectWhenHidden:!0},_create:function(){if(this.element.is("select"))return this.originalElem=this.element[0],this.selectBox=this.element,this.selectItems=this.element.find("option"),this.firstSelectItem=this.element.find("option").slice(0,1),this.currentFocus=0,this.blur=!0,this.documentHeight=a(d).height(),this.textArray=[],this.currentIndex=0,this.flipped=!1,this.disabledClasses="bootstrap"===this.options.theme?"disabled":"jqueryui"===this.options.theme?"ui-state-disabled":
"jquerymobile"===this.options.theme?"ui-disabled":"selectboxit-disabled",this._createdropdown()._createUnorderedList()._addSelectBoxAttributes()._replaceSelectBox()._eventHandlers(),this.originalElem.disabled&&this.disable&&this.disable(),this._ariaAccessibility&&this._ariaAccessibility(),"bootstrap"===this.options.theme?this._twitterbootstrap():"jqueryui"===this.options.theme?this._jqueryui():"jquerymobile"===this.options.theme?this._jquerymobile():this._addClasses(),this._mobile(),this.options["native"]&&
this._applyNativeSelect(),this.triggerEvent("create"),this},_createdropdown:function(){return this.dropdownText=a("<span/>",{id:(this.originalElem.id||"")&&this.originalElem.id+"SelectBoxItText","class":"selectboxit-text",unselectable:"on",text:this.firstSelectItem.text()}).attr("data-val",this.originalElem.value),this.dropdownImage=a("<i/>",{id:(this.originalElem.id||"")&&this.originalElem.id+"SelectBoxItDefaultIcon","class":"selectboxit-default-icon",unselectable:"on"}),this.dropdown=a("<span/>",
{id:(this.originalElem.id||"")&&this.originalElem.id+"SelectBoxIt","class":"selectboxit "+(this.selectBox.attr("class")||""),name:this.originalElem.name,tabindex:this.selectBox.attr("tabindex")||"0",unselectable:"on"}).append(this.dropdownImage).append(this.dropdownText),this.dropdownContainer=a("<span/>",{id:(this.originalElem.id||"")&&this.originalElem.id+"SelectBoxItContainer","class":"selectboxit-container"}).append(this.dropdown),this},_createUnorderedList:function(){var c=this,b,d,g,h,i,j,k,
m="",o=a("<ul/>",{id:(c.originalElem.id||"")&&c.originalElem.id+"SelectBoxItOptions","class":"selectboxit-options",tabindex:-1});c.options.showFirstOption||(c.selectItems=c.selectBox.find("option").slice(1));c.selectItems.each(function(o){g=d="";b=a(this).prop("disabled");h=a(this).data("icon")||"";j=(i=a(this).data("iconurl")||"")?"selectboxit-option-icon-url":"";k=i?"style=\"background-image:url('"+i+"');\"":"";a(this).parent().is("optgroup")&&(d="selectboxit-optgroup-option",0===a(this).index()&&
(g='<span class="selectboxit-optgroup-header" data-disabled="true">'+a(this).parent().first().attr("label")+"</span>"));m+=g+'<li id="'+o+'" data-val="'+c.htmlEscape(this.value)+'" data-disabled="'+b+'" class="'+d+" selectboxit-option "+(a(this).attr("class")||"")+'"><a class="selectboxit-option-anchor"><i class="selectboxit-option-icon '+h+" "+j+'"'+k+"></i>"+c.htmlEscape(a(this).text())+"</a></li>";c.textArray[o]=b?"":a(this).text();this.selected&&(c.dropdownText.text(a(this).text()),c.currentFocus=
o)});if((c.options.defaultText||c.selectBox.data("text"))&&!c.selectBox.find("option[selected]").length){var p=c.options.defaultText||c.selectBox.data("text");c.dropdownText.text(p);c.options.defaultText=p}return o.append(m),c.list=o,c.dropdownContainer.append(c.list),c.listItems=c.list.find("li"),c.listItems.first().addClass("selectboxit-option-first"),c.listItems.last().addClass("selectboxit-option-last"),c.list.find("li[data-disabled='true']").not(".optgroupHeader").addClass(c.disabledClasses),
0===c.currentFocus&&!c.options.showFirstOption&&c.listItems.eq(0).hasClass(c.disabledClasses)&&(c.currentFocus=+c.listItems.not(".ui-state-disabled").first().attr("id")),c.dropdownImage.addClass(c.selectBox.data("icon")||c.options.defaultIcon||c.listItems.eq(c.currentFocus).find("i").attr("class")),c.dropdownImage.attr("style",c.listItems.eq(c.currentFocus).find("i").attr("style")),c},_replaceSelectBox:function(){this.selectBox.css("display","none").after(this.dropdownContainer);var c=this.dropdown.height();
return this.downArrow=a("<i/>",{id:(this.originalElem.id||"")&&this.originalElem.id+"SelectBoxItArrow","class":"selectboxit-arrow",unselectable:"on"}),this.downArrowContainer=a("<span/>",{id:(this.originalElem.id||"")&&this.originalElem.id+"SelectBoxItArrowContainer","class":"selectboxit-arrow-container",unselectable:"on"}).append(this.downArrow),this.dropdown.append(this.options.nostyle?this.downArrow:this.downArrowContainer),this.options.nostyle||(this.downArrowContainer.css({height:c+"px"}),this.dropdownText.css({"line-height":this.dropdown.css("height"),
"max-width":this.dropdown.outerWidth()-(this.downArrowContainer.outerWidth()+this.dropdownImage.outerWidth())}),this.dropdownImage.css({"margin-top":c/4}),this.listItems.removeClass("selectboxit-selected").eq(this.currentFocus).addClass("selectboxit-selected")),this},_scrollToView:function(a){var b=this.list.scrollTop(),d=this.listItems.eq(this.currentFocus).height(),g=this.listItems.eq(this.currentFocus).position().top,h=this.list.height();return"search"===a?h-g<d?this.list.scrollTop(b+(g-(h-d))):
-1>g&&this.list.scrollTop(g-d):"up"===a?-1>g&&this.list.scrollTop(b-Math.abs(this.listItems.eq(this.currentFocus).position().top)):"down"===a&&h-g<d&&this.list.scrollTop(b+(Math.abs(this.listItems.eq(this.currentFocus).position().top)-h+d)),this},_callbackSupport:function(c){return a.isFunction(c)&&c.call(this,this.dropdown),this},open:function(a){var b=this;b._dynamicPositioning&&b._dynamicPositioning();if(!this.list.is(":visible"))switch(b.triggerEvent("open"),b.options.showEffect){case "none":b.list.show();
b._scrollToView("search");break;case "show":b.list.show(b.options.showEffectSpeed,function(){b._scrollToView("search")});break;case "slideDown":b.list.slideDown(b.options.showEffectSpeed,function(){b._scrollToView("search")});break;case "fadeIn":b.list.fadeIn(b.options.showEffectSpeed);b._scrollToView("search");break;default:b.list.show(b.options.showEffect,b.options.showEffectOptions,b.options.showEffectSpeed,function(){b._scrollToView("search")})}return b._callbackSupport(a),b},close:function(a){var b=
this;if(b.list.is(":visible"))switch(b.triggerEvent("close"),b.options.hideEffect){case "none":b.list.hide();b._scrollToView("search");break;case "hide":b.list.hide(b.options.hideEffectSpeed);break;case "slideUp":b.list.slideUp(b.options.hideEffectSpeed);break;case "fadeOut":b.list.fadeOut(b.options.hideEffectSpeed);break;default:b.list.hide(b.options.hideEffect,b.options.hideEffectOptions,b.options.hideEffectSpeed,function(){b._scrollToView("search")})}return b._callbackSupport(a),b},_eventHandlers:function(){var c=
this;return this.dropdown.bind({"click.selectBoxIt":function(){c.dropdown.trigger("focus",!0);c.originalElem.disabled||(c.triggerEvent("click"),c.list.is(":visible")?c.close():c.open())},"mousedown.selectBoxIt":function(){a(this).data("mdown",!0);c.triggerEvent("mousedown")},"mouseup.selectBoxIt":function(){c.triggerEvent("mouseup")},"blur.selectBoxIt":function(){c.blur&&(c.triggerEvent("blur"),c.list.is(":visible")&&c.close())},"focus.selectBoxIt":function(b,d){var g=a(this).data("mdown");a(this).removeData("mdown");
!g&&!d&&setTimeout(function(){c.triggerEvent("tab-focus")},0);d||c.triggerEvent("focus")},"keydown.selectBoxIt":function(a){switch(a.keyCode){case 40:a.preventDefault();c.moveDown&&(c.options.keydownOpen?c.list.is(":visible")?c.moveDown():c.open():c.moveDown());c.options.keydownOpen&&c.open();break;case 38:a.preventDefault();c.moveUp&&(c.options.keydownOpen?c.list.is(":visible")?c.moveUp():c.open():c.moveUp());c.options.keydownOpen&&c.open();break;case 13:var b=c.list.find("li."+c.focusClass);b.length||
(b=c.listItems.first());c._update(b);a.preventDefault();c.list.is(":visible")&&c.close();c.triggerEvent("enter");break;case 9:c.triggerEvent("tab-blur");break;case 8:a.preventDefault();c.triggerEvent("backspace");break;case 27:c.close()}},"keypress.selectBoxIt":function(a){var b=a.charCode||a.keyCode,d=String.fromCharCode(b);32===b&&a.preventDefault();c.search&&c.search(d,!0,"")},"mouseenter.selectBoxIt":function(){c.triggerEvent("mouseenter")},"mouseleave.selectBoxIt":function(){c.triggerEvent("mouseleave")}}),
c.list.bind({"mouseover.selectBoxIt":function(){c.blur=!1},"mouseout.selectBoxIt":function(){c.blur=!0},"focusin.selectBoxIt":function(){c.dropdown.trigger("focus",!0)}}).delegate("li","click.selectBoxIt",function(){c._update(a(this));c.triggerEvent("option-click");"false"===a(this).attr("data-disabled")&&c.close()}).delegate("li","focusin.selectBoxIt",function(){c.listItems.not(a(this)).removeAttr("data-active");a(this).attr("data-active","");(c.options.searchWhenHidden&&c.list.is(":hidden")||c.options.aggressiveChange||
c.list.is(":hidden")&&c.options.selectWhenHidden)&&c._update(a(this))}),c.selectBox.bind({"change.selectBoxIt, internal-change.selectBoxIt":function(a,b){if(!b){var d=c.list.find('li[data-val="'+c.originalElem.value+'"]');d.length&&(c.listItems.eq(c.currentFocus).removeClass(c.focusClass),c.currentFocus=+d.attr("id"))}c.dropdownText.text(c.listItems.eq(c.currentFocus).find("a").text()).attr("data-val",c.originalElem.value);c.listItems.eq(c.currentFocus).find("i").attr("class")&&(c.dropdownImage.attr("class",
c.listItems.eq(c.currentFocus).find("i").attr("class")).addClass("selectboxit-default-icon"),c.dropdownImage.attr("style",c.listItems.eq(c.currentFocus).find("i").attr("style")));c.triggerEvent("changed")},"disable.selectBoxIt":function(){c.dropdown.addClass(c.disabledClasses)},"enable.selectBoxIt":function(){c.dropdown.removeClass(c.disabledClasses)}}),c},_update:function(a){"false"===a.attr("data-disabled")&&(this.options.defaultText&&this.dropdownText.text()===this.options.defaultText&&this.selectBox.val()===
a.attr("data-val")?this.dropdownText.text(this.listItems.eq(this.currentFocus).text()).trigger("internal-change"):(this.selectBox.val(a.attr("data-val")),this.currentFocus=+a.attr("id"),this.originalElem.value!==this.dropdownText.attr("data-val")&&this.triggerEvent("change")))},_addClasses:function(c){var b=this,d=c.focusClasses||"selectboxit-focus",g=c.hoverClasses||"selectboxit-hover",h=c.buttonClasses||"selectboxit-btn",i=c.listClasses||"selectboxit-dropdown";return b.focusClass=d,b.selectedClass=
"selectboxit-selected",b.downArrow.addClass(b.selectBox.data("downarrow")||b.options.downArrowIcon||c.arrowClasses),b.dropdownContainer.addClass(c.containerClasses),b.dropdown.addClass(h),b.list.addClass(i),b.listItems.bind({"focusin.selectBoxIt":function(){a(this).addClass(d)},"blur.selectBoxIt":function(){a(this).removeClass(d)}}),b.selectBox.bind({"open.selectBoxIt":function(){var a=b.list.find("li[data-val='"+b.dropdownText.attr("data-val")+"']");a.length||(a=b.listItems.first());b.currentFocus=
+a.attr("id");a=b.listItems.eq(b.currentFocus);b.dropdown.removeClass(g).addClass(d);b.listItems.removeClass(b.selectedClass);b.listItems.removeAttr("data-active").not(a).removeClass(d);a.addClass(d).addClass(b.selectedClass)},"blur.selectBoxIt":function(){b.dropdown.removeClass(d)},"mouseenter.selectBoxIt":function(){b.dropdown.addClass(g)},"mouseleave.selectBoxIt":function(){b.dropdown.removeClass(g)}}),b.listItems.bind({"mouseenter.selectBoxIt":function(){"false"===a(this).attr("data-disabled")&&
(b.listItems.removeAttr("data-active"),a(this).addClass(d).attr("data-active",""),b.listItems.not(a(this)).removeClass(d),a(this).addClass(d),b.currentFocus=+a(this).attr("id"))},"mouseleave.selectBoxIt":function(){"false"===a(this).attr("data-disabled")&&(b.listItems.not(a(this)).removeClass(d).removeAttr("data-active"),a(this).addClass(d),b.currentFocus=+a(this).attr("id"))}}),a(".selectboxit-option-icon").not(".selectboxit-default-icon").css("margin-top",b.downArrowContainer.height()/4),b},_jqueryui:function(){return this._addClasses({focusClasses:"ui-state-focus",
hoverClasses:"ui-state-hover",arrowClasses:"ui-icon ui-icon-triangle-1-s",buttonClasses:"ui-widget ui-state-default",listClasses:"ui-widget ui-widget-content",containerClasses:"jqueryui"}),this},_twitterbootstrap:function(){return this._addClasses({focusClasses:"active",hoverClasses:"",arrowClasses:"caret",buttonClasses:"btn",listClasses:"dropdown-menu",containerClasses:"bootstrap"}),this},_jquerymobile:function(){var a=this.selectBox.attr("data-theme")||"c";return this._addClasses({focusClasses:"ui-btn-down-"+
a,hoverClasses:"ui-btn-hover-"+a,arrowClasses:"ui-icon ui-icon-arrow-d ui-icon-shadow",buttonClasses:"ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-up-"+a,listClasses:"ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-up-"+a,containerClasses:"jquerymobile"}),this},destroy:function(b){return this._destroySelectBoxIt(),a.Widget.prototype.destroy.call(this),this._callbackSupport(b),this},_destroySelectBoxIt:function(){return this.dropdown.unbind(".selectBoxIt").undelegate(".selectBoxIt"),
this.dropdownContainer.remove(),this.triggerEvent("destroy"),this.selectBox.removeAttr("style").show(),this},refresh:function(a){return this._destroySelectBoxIt()._create(!0)._callbackSupport(a),this.triggerEvent("refresh"),this},_applyNativeSelect:function(){var a=this,b;a.dropdownContainer.css({position:"static"});a.selectBox.css({display:"block",width:a.dropdown.outerWidth(),height:a.dropdown.outerHeight(),opacity:"0",position:"absolute",top:a.dropdown.position().top,bottom:a.dropdown.position().bottom,
left:a.dropdown.position().left,right:a.dropdown.position().right,cursor:"pointer","z-index":"999999"}).bind({"changed.selectBoxIt":function(){b=a.selectBox.find("option").filter(":selected");a.dropdownText.text(b.text());a.list.find('li[data-val="'+b.val()+'"]').find("i").attr("class")&&a.dropdownImage.attr("class",a.list.find('li[data-val="'+b.val()+'"]').find("i").attr("class")).addClass("selectboxit-default-icon")}})},_mobile:function(){return this.options.isMobile()&&this._applyNativeSelect(),
this},htmlEscape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},triggerEvent:function(a){return this.selectBox.trigger(a,{elem:this.selectBox.eq(this.options.showFirstOption?this.currentFocus:0<=this.currentFocus-1?this.currentFocus:0),"dropdown-elem":this.listItems.eq(this.currentFocus)}),this},_addSelectBoxAttributes:function(){var b=this;return b._addAttributes(b.selectBox.prop("attributes"),b.dropdown),b.selectItems.each(function(d){b._addAttributes(a(this).prop("attributes"),
b.listItems.eq(d))}),b},_addAttributes:function(b,d){var f=["title","rel"];return b.length&&a.each(b,function(b,c){var i=c.name.toLowerCase(),j=c.value;"null"!==j&&(-1!==a.inArray(i,f)||-1!==i.indexOf("data"))&&d.attr(i,j)}),this}})});
(function(a){a(window.jQuery,window,document)})(function(a){a.selectBox.selectBoxIt.prototype._ariaAccessibility=function(){var b=this;return b.dropdown.attr({role:"combobox","aria-autocomplete":"list","aria-expanded":"false","aria-owns":b.list.attr("id"),"aria-activedescendant":b.listItems.eq(b.currentFocus).attr("id"),"aria-label":a("label[for='"+b.originalElem.id+"']").text()||"","aria-live":"assertive"}).bind({"disable.selectBoxIt":function(){b.dropdown.attr("aria-disabled","true")},"enable.selectBoxIt":function(){b.dropdown.attr("aria-disabled",
"false")}}),b.list.attr({role:"listbox","aria-hidden":"true"}),b.listItems.attr({role:"option"}),b.selectBox.bind({"change.selectBoxIt":function(){b.dropdownText.attr("aria-label",b.originalElem.value)},"open.selectBoxIt":function(){b.list.attr("aria-hidden","false");b.dropdown.attr("aria-expanded","true")},"close.selectBoxIt":function(){b.list.attr("aria-hidden","true");b.dropdown.attr("aria-expanded","false")}}),b}});
(function(a){a(window.jQuery,window,document)})(function(a){a.selectBox.selectBoxIt.prototype.disable=function(b){return this.options.disabled||(this.close(),this.triggerEvent("disable"),this.selectBox.attr("disabled","disabled"),this.dropdown.removeAttr("tabindex").addClass("selectboxit-disabled"),a.Widget.prototype.disable.call(this)),this._callbackSupport(b),this};a.selectBox.selectBoxIt.prototype.disableOption=function(a,d){var c,e,f;return"number"==typeof a&&(this.close(),c=this.selectBox.find("option").eq(a),
this.triggerEvent("disable-option"),c.attr("disabled","disabled"),this.listItems.eq(a).attr("data-disabled","true").addClass(this.disabledClasses),this.currentFocus===a&&(e=this.listItems.eq(this.currentFocus).nextAll("li").not("[data-disabled='true']").first().length,f=this.listItems.eq(this.currentFocus).prevAll("li").not("[data-disabled='true']").first().length,e?this.moveDown():f?this.moveUp():this.disable())),this._callbackSupport(d),this};a.selectBox.selectBoxIt.prototype._isDisabled=function(){return this.originalElem.disabled&&
this.disable(),this}});
(function(a){a(window.jQuery,window,document)})(function(a,b){a.selectBox.selectBoxIt.prototype._dynamicPositioning=function(){var d=this.dropdown.offset().top,c=this.list.data("max-height")||this.list.outerHeight(),e=this.dropdown.outerHeight(),f=a(b).height(),g=a(b).scrollTop(),h=!(d+e+c<=f+g);this.list.data("max-height")||this.list.data("max-height",this.list.outerHeight());this.selectBox.css("display","none");h?this.dropdown.offset().top-g>=c?(this.list.css("max-height",this.list.data("max-height")),
this.list.css("top",this.dropdown.position().top-this.list.outerHeight())):(d=Math.abs(d+e+c-(f+g)),c=Math.abs(this.dropdown.offset().top-g-c),d<c?(this.list.css("max-height",this.list.data("max-height")-d-e/2),this.list.css("top","auto")):(this.list.css("max-height",this.list.data("max-height")-c-e/2),this.list.css("top",this.dropdown.position().top-this.list.outerHeight()))):(this.list.css("max-height",this.list.data("max-height")),this.list.css("top","auto"));return this}});
(function(a){a(window.jQuery,window,document)})(function(a){a.selectBox.selectBoxIt.prototype.enable=function(b){return this.options.disabled&&(this.triggerEvent("enable"),this.selectBox.removeAttr("disabled"),this.dropdown.attr("tabindex",0).removeClass(this.disabledClasses),a.Widget.prototype.enable.call(this),this._callbackSupport(b)),this};a.selectBox.selectBoxIt.prototype.enableOption=function(a,d){var c;return"number"==typeof a&&(c=this.selectBox.find("option").eq(a),this.triggerEvent("enable-option"),
c.removeAttr("disabled"),this.listItems.eq(a).attr("data-disabled","false").removeClass(this.disabledClasses)),this._callbackSupport(d),this}});
(function(a){a(window.jQuery,window,document)})(function(a){a.selectBox.selectBoxIt.prototype.moveDown=function(a){this.currentFocus+=1;var d="true"===this.listItems.eq(this.currentFocus).attr("data-disabled")?!0:!1,c=this.listItems.eq(this.currentFocus).nextAll("li").not("[data-disabled='true']").first().length;if(this.currentFocus===this.listItems.length)this.currentFocus-=1;else{if(d&&c){this.listItems.eq(this.currentFocus-1).blur();this.moveDown();return}d&&!c?this.currentFocus-=1:(this.listItems.eq(this.currentFocus-
1).blur().end().eq(this.currentFocus).focusin(),this._scrollToView("down"),this.triggerEvent("moveDown"))}return this._callbackSupport(a),this};a.selectBox.selectBoxIt.prototype.moveUp=function(a){this.currentFocus-=1;var d="true"===this.listItems.eq(this.currentFocus).attr("data-disabled")?!0:!1,c=this.listItems.eq(this.currentFocus).prevAll("li").not("[data-disabled='true']").first().length;if(-1===this.currentFocus)this.currentFocus+=1;else{if(d&&c){this.listItems.eq(this.currentFocus+1).blur();
this.moveUp();return}d&&!c?this.currentFocus+=1:(this.listItems.eq(this.currentFocus+1).blur().end().eq(this.currentFocus).focusin(),this._scrollToView("up"),this.triggerEvent("moveUp"))}return this._callbackSupport(a),this}});
(function(a){a(window.jQuery,window,document)})(function(a,b,d,c){a.selectBox.selectBoxIt.prototype._setCurrentSearchOption=function(a){return(this.options.aggressiveChange||this.options.selectWhenHidden||this.listItems.eq(a).is(":visible"))&&!0!==this.listItems.eq(a).data("disabled")&&(this.listItems.eq(this.currentFocus).blur(),this.currentIndex=a,this.currentFocus=a,this.listItems.eq(this.currentFocus).focusin(),this._scrollToView("search"),this.triggerEvent("search")),this};a.selectBox.selectBoxIt.prototype._searchAlgorithm=
function(a,b){var c=!1,d,i,j;d=a;for(j=this.textArray.length;d<j;d+=1){for(i=0;i<j;i+=1)-1!==this.textArray[i].search(b)&&(c=!0,i=j);c||(this.currentText=this.currentText.charAt(this.currentText.length-1).replace(/[|()\[{.+*?$\\]/g,"\\$0"),b=RegExp(this.currentText,"gi"));if(3>this.currentText.length){if(b=RegExp(this.currentText.charAt(0),"gi"),-1!==this.textArray[d].charAt(0).search(b))return this._setCurrentSearchOption(d),this.currentIndex+=1,!1}else if(-1!==this.textArray[d].search(b))return this._setCurrentSearchOption(d),
!1;if(this.textArray[d].toLowerCase()===this.currentText.toLowerCase())return this._setCurrentSearchOption(d),this.currentText="",!1}return!0};a.selectBox.selectBoxIt.prototype.search=function(a,b,d){this.currentText===c&&(this.currentText="");b?this.currentText+=a.replace(/[|()\[{.+*?$\\]/g,"\\$0"):this.currentText=a.replace(/[|()\[{.+*?$\\]/g,"\\$0");return this._searchAlgorithm(this.currentIndex,this.currentText)&&this._searchAlgorithm(0,this.currentText),this._callbackSupport(d),this}});
(function(a){a(window.jQuery,window,document)})(function(a){a.selectBox.selectBoxIt.prototype.setOption=function(b,d,c){return"showFirstOption"===b&&!d?this.listItems.eq(0).hide():"showFirstOption"===b&&d?this.listItems.eq(0).show():"defaultIcon"===b&&d?this.dropdownImage.attr("class",d+" selectboxit-arrow"):"downArrowIcon"===b&&d?this.downArrow.attr("class",d+" selectboxit-arrow"):"defaultText"===b&&this.dropdownText.text(d),a.Widget.prototype._setOption.apply(this,arguments),this._callbackSupport(c),
this}});
(function(a){a(window.jQuery,window,document)})(function(a){a.selectBox.selectBoxIt.prototype.setOptions=function(b,d){return a.Widget.prototype._setOptions.apply(this,arguments),this.options.showFirstOption?this.listItems.eq(0).show():this.listItems.eq(0).hide(),this.options.defaultIcon&&this.dropdownImage.attr("class",this.options.defaultIcon+" selectboxit-arrow"),this.options.downArrowIcon&&this.downArrow.attr("class",this.options.downArrowIcon+" selectboxit-arrow"),this.options.defaultText&&this.dropdownText.text(this.options.defaultText),
this._callbackSupport(d),this}});(function(a){a(window.jQuery,window,document)})(function(a){a.selectBox.selectBoxIt.prototype.wait=function(a,d){var c=this;return this.returnTimeout(a).then(function(){c._callbackSupport(d)}),c};a.selectBox.selectBoxIt.prototype.returnTimeout=function(b){return a.Deferred(function(a){setTimeout(a.resolve,b)})}});
(function(a){a(window.jQuery,window,document)})(function(a){a.selectBox.selectBoxIt.prototype.selectOption=function(a,d){return"number"==typeof a?this.selectBox.val(this.selectBox.find("option").eq(a).val()).change():"string"==typeof a&&this.selectBox.val(a).change(),this._callbackSupport(d),this}});(function(a){a(document.body).is("[role]")||a(document.body).attr("role","application");var b=0;a.widget("ui.tooltip",{options:{tooltipClass:"ui-widget-content",content:function(){return a(this).attr("title")},position:{my:"center bottom",at:"center bottom",offset:"50 50"}},_init:function(){var d=this;this.showTimeout;this.tooltip=a("<div></div>").attr("id","ui-tooltip-"+b++).attr("role","tooltip").attr("aria-hidden","true").addClass("ui-tooltip ui-widget ui-corner-all").addClass(this.options.tooltipClass).appendTo(document.body).hide();
this.tooltipContent=a("<div></div>").addClass("ui-tooltip-content").appendTo(this.tooltip);this.opacity=this.tooltip.css("opacity");this.element.bind("focus.tooltip mouseenter.tooltip",function(a){d.open(a)}).bind("blur.tooltip mouseleave.tooltip",function(a){d.close(a)})},enable:function(){this.options.disabled=!1},disable:function(){this.options.disabled=!0},destroy:function(){this.tooltip.remove();a.Widget.prototype.destroy.apply(this,arguments)},widget:function(){return this.element.pushStack(this.tooltip.get())},
open:function(a){var b=this.element;if(!(this.current&&this.current[0]==b[0])){var e=this;this.current=b;this.currentTitle=b.attr("title");var f=this.options.content.call(b[0],function(f){setTimeout(function(){e.current==b&&e._show(a,b,f)},13)});f&&(e.showTimeout=setTimeout(function(){e._show(a,b,f)},350))}},_show:function(b,c,e){e&&(c.attr("title",""),this.options.disabled||(this.tooltipContent.html(e),this.tooltip.css({top:0,left:0}).show().position(a.extend({of:c},this.options.position)).hide(),
parseInt(this.tooltip.css("left").replace(/px/,""))+this.tooltip.width()>window.innerWidth&&this.tooltip.css("left",window.innerWidth-(this.tooltip.width()+this.tooltip.width()/2)+"px"),this.tooltip.attr("aria-hidden","false"),c.attr("aria-describedby",this.tooltip.attr("id")),this.tooltip.stop(!1,!0).fadeIn(),this._trigger("open",b)))},close:function(a){if(this.current){var b=this.current.attr("title",this.currentTitle);this.current=null;this.options.disabled||(clearTimeout(this.showTimeout),b.removeAttr("aria-describedby"),
this.tooltip.attr("aria-hidden","true"),this.tooltip.stop(!1,!0).fadeOut(),this._trigger("close",a))}}})})(jQuery);(function(a,b,d){function c(a,c){var d=b.createElement(a||"div"),e;for(e in c)d[e]=c[e];return d}function e(a){for(var b=1,c=arguments.length;b<c;b++)a.appendChild(arguments[b]);return a}function f(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),c=0.01+100*(c/d),d=Math.max(1-(1-a)/b*(100-c),a),f=o.substring(0,o.indexOf("Animation")).toLowerCase();m[e]||(p.insertRule("@"+(f&&"-"+f+"-"||"")+"keyframes "+e+"{0%{opacity:"+d+"}"+c+"%{opacity:"+a+"}"+(c+0.01)+"%{opacity:1}"+(c+b)%100+"%{opacity:"+
a+"}100%{opacity:"+d+"}}",0),m[e]=1);return e}function g(a,b){var c=a.style,e,f;if(c[b]!==d)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(f=0;f<k.length;f++)if(e=k[f]+b,c[e]!==d)return e}function h(a,b){for(var c in b)a.style[g(a,c)||c]=b[c];return a}function i(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],e;for(e in c)a[e]===d&&(a[e]=c[e])}return a}function j(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}var k=["webkit",
"Moz","ms","O"],m={},o,p=function(){var a=c("style");e(b.getElementsByTagName("head")[0],a);return a.sheet||a.styleSheet}(),q={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:0.25,fps:20,zIndex:2E9,className:"spinner",top:"auto",left:"auto"},n=function l(a){if(!this.spin)return new l(a);this.opts=i(a||{},l.defaults,q)};n.defaults={};i(n.prototype,{spin:function(a){this.stop();var b=this,d=b.opts,e=b.el=h(c(0,{className:d.className}),{position:"relative",zIndex:d.zIndex}),
f=d.radius+d.length+d.width,g,i;a&&(a.insertBefore(e,a.firstChild||null),i=j(a),g=j(e),h(e,{left:("auto"==d.left?i.x-g.x+(a.offsetWidth>>1):d.left+f)+"px",top:("auto"==d.top?i.y-g.y+(a.offsetHeight>>1):d.top+f)+"px"}));e.setAttribute("aria-role","progressbar");b.lines(e,b.opts);if(!o){var k=0,n=d.fps,m=n/d.speed,p=(1-d.opacity)/(m*d.trail/100),q=m/d.lines;!function v(){k++;for(var a=d.lines;a;a--){var c=Math.max(1-(k+a*q)%m*p,d.opacity);b.opacity(e,d.lines-a,c,d)}b.timeout=b.el&&setTimeout(v,~~(1E3/
n))}()}return b},stop:function(){var a=this.el;a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=d);return this},lines:function(a,b){function d(a,e){return h(c(),{position:"absolute",width:b.length+b.width+"px",height:b.width+"px",background:a,boxShadow:e,transformOrigin:"left",transform:"rotate("+~~(360/b.lines*g+b.rotate)+"deg) translate("+b.radius+"px,0)",borderRadius:(b.width>>1)+"px"})}for(var g=0,i;g<b.lines;g++)i=h(c(),{position:"absolute",top:1+~(b.width/2)+
"px",transform:b.hwaccel?"translate3d(0,0,0)":"",opacity:b.opacity,animation:o&&f(b.opacity,b.trail,g,b.lines)+" "+1/b.speed+"s linear infinite"}),b.shadow&&e(i,h(d("#000","0 0 4px #000"),{top:"2px"})),e(a,e(i,d(b.color,"0 0 1px rgba(0,0,0,.1)")));return a},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});!function(){function a(b,d){return c("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',d)}var b=h(c("group"),{behavior:"url(#default#VML)"});!g(b,
"transform")&&b.adj?(p.addRule(".spin-vml","behavior:url(#default#VML)"),n.prototype.lines=function(b,c){function d(){return h(a("group",{coordsize:i+" "+i,coordorigin:-g+" "+-g}),{width:i,height:i})}function f(b,i,j){e(k,e(h(d(),{rotation:360/c.lines*b+"deg",left:~~i}),e(h(a("roundrect",{arcsize:1}),{width:g,height:c.width,left:c.radius,top:-c.width>>1,filter:j}),a("fill",{color:c.color,opacity:c.opacity}),a("stroke",{opacity:0}))))}var g=c.length+c.width,i=2*g,j=2*-(c.width+c.length)+"px",k=h(d(),
{position:"absolute",top:j,left:j});if(c.shadow)for(j=1;j<=c.lines;j++)f(j,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(j=1;j<=c.lines;j++)f(j);return e(b,k)},n.prototype.opacity=function(a,b,c,d){a=a.firstChild;d=d.shadow&&d.lines||0;if(a&&b+d<a.childNodes.length&&(a=(a=(a=a.childNodes[b+d])&&a.firstChild)&&a.firstChild))a.opacity=c}):o=g(b,"animation")}();a.Spinner=n})(window,document);
jQuery.fn.spin=function(a){this.each(function(){var b=$(this),d=b.data();d.spinner&&(d.spinner.stop(),delete d.spinner);!1!==a&&(d.spinner=(new Spinner($.extend({color:b.css("color")},a))).spin(this))});return this};(function(){$.klear=$.klear||{};$.klear.baseurl=$.klear.baseurl||$("base").attr("href");$.klear.loadedTemplates=$.klear.loadedTemplates||{};$.ajax({url:$.klear.baseurl+"../klear/template/cache",dataType:"json",success:function(a){if(a.templates)for(var b in a.templates)$.template(b,a.templates[b]),$.klear.loadedTemplates[b]=!0}})})();
